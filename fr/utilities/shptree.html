<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>shptree &#8212; MapServer 7.0.7 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.7 documentation" href="../index.html" />
    <link rel="up" title="Utilitaires" href="index.html" />
    <link rel="next" title="shptreetst" href="shptreetst.html" />
    <link rel="prev" title="shp2img" href="shp2img.html" /> 
  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../utilities/shptree.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/utilities/shptree.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/utilities/shptree.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/utilities/shptree.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/utilities/shptree.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/utilities/shptree.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/utilities/shptree.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/utilities/shptree.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/utilities/shptree.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/utilities/shptree.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/utilities/shptree.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/utilities/shptree.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/utilities/shptree.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="shptreetst.html" title="shptreetst"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="shp2img.html" title="shp2img"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation de MapServer 7.0.7</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Utilitaires</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="shptree">
<span id="index-0"></span><span id="id1"></span><h1>shptree<a class="headerlink" href="#shptree" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="purpose">
<h2>Objectif<a class="headerlink" href="#purpose" title="Lien permanent vers ce titre">¶</a></h2>
<p>Créé un index spatial basé sur les quadrants pour un shapefile. La profondeur par défaut est calculé afin que chaque noeud de l&#8217;arbre (les cellules du quadrant) contienne 8 géométries. N&#8217;utilisez pas la valeur par défaut avec les points, une valeur entre 6 et 10 semble fonctionner. Vos valeurs peuvent être différentes et nécessitent quelques tests.</p>
<p>La <a class="reference external" href="https://github.com/mapserver/mapserver/wiki/ShpTree">page wiki shptree</a> peut également contenir des informations sur cette commande.</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cette commande est un must pour n&#8217;importe quelle application MapServer qui utilise des shapefiles. Shptree créé un index spatial de votre shapefile, en utilisant la méthode quadtree. Cela signifie que MapServer utilisera cet index pour trouver rapidement la géométrie appropriée. Il créé un fichier du même nom que votre shapefile avec une extension <em>.qix</em>. La méthode quadtree découpe le fichier en 4 parties (quadrant), récursivement jusqu&#8217;à ce que seules quelques géométries soient contenues dans chaque quadrant. Ce nombre minimal peut être défini avec le paramètre &lt;depth&gt; de la commande.</p>
</div>
<div class="section" id="syntax">
<h2>Syntaxe<a class="headerlink" href="#syntax" title="Lien permanent vers ce titre">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">shptree</span> <span class="o">&lt;</span><span class="n">shpfile</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">depth</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">index_format</span><span class="o">&gt;</span><span class="p">]</span>
  <span class="n">Where</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">shpfile</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="o">.</span><span class="n">shp</span> <span class="n">file</span> <span class="n">to</span> <span class="n">index</span><span class="o">.</span>
  <span class="o">&lt;</span><span class="n">depth</span><span class="o">&gt;</span>   <span class="p">(</span><span class="n">optional</span><span class="p">)</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">depth</span> <span class="n">of</span> <span class="n">the</span> <span class="n">inde</span>
       <span class="n">to</span> <span class="n">create</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="mi">0</span> <span class="n">meaning</span> <span class="n">that</span> <span class="n">shptre</span>
       <span class="n">will</span> <span class="n">calculate</span> <span class="n">a</span> <span class="n">reasonable</span> <span class="n">default</span> <span class="n">depth</span><span class="o">.</span>
  <span class="o">&lt;</span><span class="n">index_format</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span> <span class="ow">is</span> <span class="n">one</span> <span class="n">of</span><span class="p">:</span>
       <span class="n">NL</span><span class="p">:</span> <span class="n">LSB</span> <span class="n">byte</span> <span class="n">order</span><span class="p">,</span> <span class="n">using</span> <span class="n">new</span> <span class="n">index</span> <span class="nb">format</span>
       <span class="n">NM</span><span class="p">:</span> <span class="n">MSB</span> <span class="n">byte</span> <span class="n">order</span><span class="p">,</span> <span class="n">using</span> <span class="n">new</span> <span class="n">index</span> <span class="nb">format</span>
   <span class="n">The</span> <span class="n">following</span> <span class="n">old</span> <span class="nb">format</span> <span class="n">options</span> <span class="n">are</span> <span class="n">deprecated</span>
       <span class="n">N</span><span class="p">:</span>  <span class="n">Native</span> <span class="n">byte</span> <span class="n">order</span>
       <span class="n">L</span><span class="p">:</span>  <span class="n">LSB</span> <span class="p">(</span><span class="n">intel</span><span class="p">)</span> <span class="n">byte</span> <span class="n">order</span>
       <span class="n">M</span><span class="p">:</span>  <span class="n">MSB</span> <span class="n">byte</span> <span class="n">order</span>
   <span class="n">The</span> <span class="n">default</span> <span class="n">index_format</span> <span class="n">on</span> <span class="n">this</span> <span class="n">system</span> <span class="ow">is</span><span class="p">:</span> <span class="n">NL</span>
</pre></div>
</div>
<p>Exemple</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">shptree</span> <span class="n">us_states</span><span class="o">.</span><span class="n">shp</span>
  <span class="n">creating</span> <span class="n">index</span> <span class="n">of</span> <span class="n">new</span>  <span class="n">LSB</span> <span class="nb">format</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Result</dt>
<dd><p class="first last">Un fichier nommé &#8216;us_states.qix&#8217; a été créé au même endroit (notez que vous pouvez utiliser la commande shptreevis, décrite à la page suivante, pour visualiser les quadrants quadtree réels qui seront utilisés par MapServer dans ce fichier qix)</p>
</dd>
</dl>
</div>
<div class="section" id="mapfile-notes">
<h2>Remarques sur le Mapfile<a class="headerlink" href="#mapfile-notes" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les shapefiles sont gérés en natif par MapServer et ne nécessitent pas l&#8217;extension <em>.shp</em> dans le chemin DATA de l&#8217;objet LAYER. En fait, vous NE DEVEZ PAS définir l&#8217;extension pour que MapServer utilise les fichiers <em>.qix</em>, par exemple:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">...</span>
  <span class="k">DATA</span> <span class="s">&quot;us_states&quot;</span>    <span class="c">#MapServer will search for us_states.qix and will use it</span>
  <span class="p">...</span>
<span class="k">END</span>

<span class="k">LAYER</span>
  <span class="p">...</span>
  <span class="k">DATA</span> <span class="s">&quot;us_states.shp&quot;</span> <span class="c">#MapServer will search for us_states.shp.qix and won&#39;t find it</span>
  <span class="p">...</span>
<span class="k">END</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">À partir de MapServer 5.2 le fichier qix sera utilisé même lorsque l&#8217;extension .shp est spécifiée.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">shptree</a><ul>
<li><a class="reference internal" href="#purpose">Objectif</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#syntax">Syntaxe</a></li>
<li><a class="reference internal" href="#mapfile-notes">Remarques sur le Mapfile</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="shptreetst.html" title="shptreetst"
             >suivant</a> |</li>
        <li class="right" >
          <a href="shp2img.html" title="shp2img"
             >précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation de MapServer 7.0.7</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Utilitaires</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2017, Open Source Geospatial Foundation.
      Mis à jour le 2018-01-04.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>