

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Services de tuilage supportés &mdash; MapServer 6.4.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 6.4.1 documentation" href="../index.html" />
    <link rel="up" title="MapCache" href="index.html" />
    <link rel="next" title="Alimentation du cache" href="seed.html" />
    <link rel="prev" title="Fichier de configuration" href="config.html" /> 
  </head>
  <body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
    
        
          <a href="../../en/mapcache/services.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
        
    
        
          <a href="../../it/mapcache/services.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
    
        
          <a href="../../es/mapcache/services.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
    
        
          <a href="../../zh_cn/mapcache/services.html"><img src="../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
        
    
        
          <a href="../../de/mapcache/services.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
    
        
          <a href="../../el/mapcache/services.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
    
        
          <a href="../../id/mapcache/services.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
    
        
          <a href="../../sq/mapcache/services.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
    
        
          <a href="../../tr/mapcache/services.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="seed.html" title="Alimentation du cache"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="config.html" title="Fichier de configuration"
             accesskey="P">précédent</a> |</li>
        <li><a href="../index.html">Home</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation de MapServer 6.4.1</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">MapCache</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="supported-tile-services">
<span id="mapcache-services"></span><h1>Services de tuilage supportés<a class="headerlink" href="#supported-tile-services" title="Lien permanent vers ce titre">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Thomas Bonfort</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">tbonfort at terriscope.fr</td>
</tr>
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Stephen Woodbridge</td>
</tr>
</tbody>
</table>
<p>MapCache a la capacité de servir des tuiles en utilisant de nombreux protocoles de requête et de conventions de nommage pour les tuiles. Le but de ce document est de les décrire. Les divers services doivent être activés dans le fichier mapcache.xml afin que MapCache puisse répondre à leurs requêtes spécifiques.</p>
<p>Tous les services sont disponibles dans l&#8217;interface de démonstration, à partir duquel vous être encouragés à copier/coller le code javascript avant de vous lancer dans le codage de vos propres pages utilisant les tuiles MapCache.</p>
<p>La notation suivante est utilisée sur cette page et fait référence aux noms des objets dans le fichier de configuration mapcache.xml.</p>
<blockquote>
<div><ul class="simple">
<li>&lt;tileset_name&gt; - nom d&#8217;un jeu de tuiles configuré</li>
<li>&lt;grid_name&gt; - nom de la grille définie explicitement ou implicitement</li>
<li>&lt;quadkey&gt; - spécifique au service de tuilage Virtual Earth</li>
<li>&lt;z&gt; - Niveau de zoom dans le schéma de nommage zxy</li>
<li>&lt;y&gt; - numéro de ligne dans le schéma de nommage zxy</li>
<li>&lt;x&gt; - numéro de colonne dans le schéma de nommage zxy</li>
</ul>
</div></blockquote>
<div class="section" id="tms-service">
<span id="mapcache-tms"></span><h2>Service TMS<a class="headerlink" href="#tms-service" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le service TMS service utilise un schéma de tuilage de type z/x/y où:</p>
<blockquote>
<div><ul class="simple">
<li><em>z</em> est le niveau de zoom</li>
<li><em>x</em> est le numéro de colonne</li>
<li><em>y</em> est le numéro de ligne</li>
</ul>
</div></blockquote>
<p>Pour activer le service TMS, ajoutez ces lignes au fichier de configuration mapcache.xml:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;tms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Un document de &#8220;capabilities&#8221; peut être récupéré via:</p>
<div class="highlight-python"><pre>http://myhost.com/mapcache/tms/1.0.0/</pre>
</div>
<p>Les tuiles sont demandées en utilisant le schéma:</p>
<div class="highlight-python"><pre>http://myhost.com/mapcache/tms/1.0.0/&lt;tileset_name&gt;@&lt;grid_name&gt;/&lt;z&gt;/&lt;x&gt;/&lt;y&gt;.png</pre>
</div>
<p>Pour les grilles epsg:3857 ou epsg:900913 ou GoogleMapsCompatible, avec cellules = [z/x/y]:</p>
<p>z0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>z1:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>z2:</p>
<div class="highlight-python"><pre>[2/0/0][2/1/0][2/2/0][2/3/0]
[2/0/1][2/1/1][2/2/1][2/3/1]
[2/0/2]...
[2/0/3]...</pre>
</div>
<p>etc...</p>
<p>Pour les grilles epsg:4326 ou WGS84:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La spécification OGC WMTS impose de manière un peu absurce au WellKnownScaleset GoogleCRS84Quad d&#8217;avoir un niveau 0 dont l&#8217;étendue géographiques est -180,-180,180,180. La grille MapCache par défaut &#8220;WGS84&#8221; respecte cela, ce qui peut provoquer des incompatibilités avec les logiciels qui s&#8217;attendent à ce qu&#8217;au niveau 0 on ait 2 x 1 tuiles avec pour étendue -180,-90,180,90</p>
</div>
<p>z0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>z1:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>z2:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>etc...</p>
</div>
<div class="section" id="kml-service">
<span id="mapcache-kml"></span><h2>Service KML<a class="headerlink" href="#kml-service" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le service KML produit des &#8216;<a class="reference external" href="http://code.google.com/apis/kml/documentation/kml_21tutorial.html#superoverlays">Super-Overlays</a> pour les jeux de tuiles qui sont alignés sur les grilles WGS84 / epsg:4326. Un Super-Overlay est un fichier KML liée à l&#8217;URL d&#8217;une image du cache et à un ensemble d&#8217;autres URLs correspondant aux résolutions voisines. Le service KML utilise un modèle de nommage de tuiles z/x/y où:</p>
<blockquote>
<div><ul class="simple">
<li><em>z</em> est le niveau de zoom</li>
<li><em>x</em> est le numéro de colonne</li>
<li><em>y</em> est le numéro de ligne</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Pour que le service KML soit opérationnel, le service TMS doit aussi être activé car le KML Super-Overlay fait un lien vers les images en utilisant cette spécification.</p>
</div>
<p>Pour activer le service KML, ajoutez ces lignes au fichier de configuration mapcache.xml:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;tms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;kml&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Les tuiles sont demandées en utilisant le schéma:</p>
<div class="highlight-python"><pre>http://myhost.com/mapcache/kml/&lt;tileset_name&gt;@&lt;grid_name&gt;/&lt;z&gt;/&lt;x&gt;/&lt;y&gt;.kml</pre>
</div>
</div>
<div class="section" id="ogc-wmts-service">
<span id="mapcache-wmts"></span><h2>Service WMTS OGC<a class="headerlink" href="#ogc-wmts-service" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour activer le service WMTS, ajoutez ces lignes au fichier de configuration mapcache.xml:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wmts&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Ce service respecte les requêtes du standard OGC WMTS et accepte à la fois les requêtes classiques OGC en mode KVP et les requêtes de type REST.</p>
<div class="highlight-python"><pre>http://myhost.com/mapcache/wmts?SERVICE=WMTS&amp;VERSION=1.0.0&amp;...
http://myhost.com/mapcache/wmts/1.0.0/....</pre>
</div>
<p>Les &#8220;capabilities&#8221; sont obtenues via:</p>
<div class="highlight-python"><pre>http://myhost.com/mapcache/wmts?service=wmts&amp;request=getcapabilities&amp;version=1.0.0
http://myhost.com/mapcache/wmts/1.0.0/WMTSCapabilities.xml</pre>
</div>
<div class="admonition-voir-aussi admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="featureinfo.html#mapcache-featureinfo"><em>Requêtes FeatureInfo</em></a></p>
</div>
<div class="admonition-voir-aussi admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="dimensions.html#mapcache-dimensions"><em>Dimensions du jeu de données</em></a></p>
</div>
</div>
<div class="section" id="ogc-wms-service">
<span id="mapcache-wms"></span><h2>Service WMS OGC<a class="headerlink" href="#ogc-wms-service" title="Lien permanent vers ce titre">¶</a></h2>
<p>MapCache répond aux requêtes WMS version 1.1.1, et a un support limité pour celles en version 1.3.0.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notez que le service WMS est un petit peu différent des autres services MapCache, car il écoute à la racine de l&#8217;instance configurée plutôt que sur un emplacement dédié (en fait le service répond sur <a class="reference external" href="http://server/mapcache/">http://server/mapcache/</a>? et non sur <a class="reference external" href="http://server/mapcache/wms">http://server/mapcache/wms</a>?). Ce comportement est rendu nécessaire pour permettre la <a class="reference internal" href="proxying.html#mapcache-proxying"><em>proxyfication des requêtes non prises en charge</em></a> tout en offrant un point d&#8217;entrée unique à tous les services OGC.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">MapCache supporte principalement les requêtes WMS 1.1.1 mais a un support limité de la récente version 1.3.0. Pour les requêtes 1.3.0, MapCache choisira la <a class="reference internal" href="config.html#mapcache-grids"><em>grille</em></a> à utiliser en lisant le paramètre CRS plutôt que SRS, et respectera l&#8217;ordre des axes de coordonnées pour les systèmes epsg qui inverse l&#8217;ordre x/y habituel du paramètre BBOX.</p>
</div>
<div class="admonition-voir-aussi admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="featureinfo.html#mapcache-featureinfo"><em>Requêtes FeatureInfo</em></a></p>
</div>
<div class="admonition-voir-aussi admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="dimensions.html#mapcache-dimensions"><em>Dimensions du jeu de données</em></a></p>
</div>
<div class="admonition-voir-aussi admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="tile_assembling.html#mapcache-tile-assembling"><em>Assemblage de tuiles</em></a></p>
</div>
<p>Les requêtes WMS suivent le style d&#8217;encodage classique KVP (Key Value Pair):</p>
<div class="highlight-python"><pre>http://myhost.com/mapcache?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=....</pre>
</div>
<p>Le document de &#8220;capabilities&#8221; est retourné par:</p>
<div class="highlight-python"><pre>http://myhost.com/mapcache?service=wms&amp;request=getcapabilities</pre>
</div>
</div>
<div class="section" id="googlemaps-xyz-service">
<span id="mapcache-gmaps"></span><h2>Service XYZ GoogleMaps<a class="headerlink" href="#googlemaps-xyz-service" title="Lien permanent vers ce titre">¶</a></h2>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;gmaps&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Prérequis: votre WMS doit être capable de produire des images dans le SRS EPSG:900913 ou EPSG:3857 SRS, c&#8217;est à dire qu&#8217;il devrait référencer la grille &#8220;g&#8221; ou &#8220;GoogleMapsCompatible&#8221;</p>
<p>Voici la page html minimale qui devrait vous permettre d&#8217;avancer. Les parties importantes sont dans les variables urlTemplate (pour v2) et getTileURL (pour v3).</p>
<ul class="simple">
<li>/mapcache est le chemin apache où MapCache gère les requêtes</li>
<li>test&#64;g est le jeu de tuiles et la grille à utiliser, joints par un &#8216;&#64;&#8217; - le  {Z}/{X}/{Y}  devrait être laissé de côté</li>
<li>l&#8217;extension finale devrait être changée en &#8220;jpg&#8221; si vous utilisez le format jpeg pour votre jeu de tuiles.</li>
</ul>
<div class="section" id="v2-api">
<h3>API V2<a class="headerlink" href="#v2-api" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html</span>
<span class="cp">  PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span>
<span class="cp">  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;</span>Google/MapServer Tile Example<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAnfs7bKE82qgb3Zc2YyS-oBT2yXp_ZAY8_ufC3CFXhHIE1NvwkxSySz_REpPq-4WZA27OwgbtyR3VcA&quot;</span>
        <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>

<span class="kd">function</span> <span class="nx">load</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">GBrowserIsCompatible</span><span class="p">())</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">urlTemplate</span> <span class="o">=</span> <span class="s1">&#39;/mapcache/gmaps/test@g/{Z}/{X}/{Y}.png&#39;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">myLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GTileLayer</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">18</span><span class="p">,{</span>
                                 <span class="nx">tileUrlTemplate</span><span class="o">:</span><span class="nx">urlTemplate</span><span class="p">,</span>
                                 <span class="nx">isPng</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
                                 <span class="nx">opacity</span><span class="o">:</span><span class="mf">0.8</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GMap2</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">));</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">GLargeMapControl</span><span class="p">());</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">GMapTypeControl</span><span class="p">());</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">(</span><span class="k">new</span> <span class="nx">GLatLng</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addOverlay</span><span class="p">(</span><span class="k">new</span> <span class="nx">GTileLayerOverlay</span><span class="p">(</span><span class="nx">myLayer</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body</span> <span class="na">onload=</span><span class="s">&quot;load()&quot;</span> <span class="na">onunload=</span><span class="s">&quot;GUnload()&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span> <span class="na">style=</span><span class="s">&quot;width: 500px; height: 500px&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="v3-api">
<h3>API V3<a class="headerlink" href="#v3-api" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le javascript pour l&#8217;exemple précédent en V2 devrait être légèrement modifié ainsi:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;&lt;element-id&gt;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="cm">/*options*/</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">layerOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">getTileUrl</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">coord</span><span class="p">,</span> <span class="nx">zoom</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;/mapcache/gmaps/test@g/&quot;</span> <span class="o">+</span> <span class="nx">zoom</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">coord</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">coord</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">tileSize</span><span class="o">:</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span><span class="mi">256</span><span class="p">)</span> <span class="c1">// or whatever</span>
<span class="p">};</span>
<span class="nx">map</span><span class="p">.</span><span class="nx">overlayMapTypes</span><span class="p">.</span><span class="nx">insertAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">ImageMapType</span><span class="p">(</span><span class="nx">layerOptions</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="virtual-earth-tile-service">
<span id="mapcache-ve"></span><h2>Service de tuilage Virtual Earth<a class="headerlink" href="#virtual-earth-tile-service" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les tuiles sont organisées en un ou deux modèles différents selon qu&#8217;elles utilisent un projet Mercator Sphérique, comme epsg:3857 ou epsg:900913, or si elles utilisent une projection géographiques comme epsg:4326.</p>
<p>Les tuiles sont demandées en utilisant le schéma:</p>
<div class="highlight-python"><pre>http://myhost.com/mapcache/ve?LAYER=&lt;tileset_name&gt;@&lt;grid_name&gt;&amp;tile=&lt;quadkey&gt;</pre>
</div>
<p>Pour les grilles epsg:3857 ou epsg:900913 ou GoogleMapsCompatible, &lt;quadkey&gt;  sont arrangés ainsi:</p>
<p>z0:</p>
<div class="highlight-python"><pre>[0]

http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=0</pre>
</div>
<p>z1:</p>
<div class="highlight-python"><pre>[00][01]
[02][03]

http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=00
http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=01
http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=02
http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=03</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">etc</span><span class="o">...</span>
</pre></div>
</div>
<p>Pour les grilles epsg:4326 ou WGS84, &lt;quadkey&gt; sont arrangés ainsi:</p>
<p>z1:</p>
<div class="highlight-python"><pre>[0][1]

http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=0
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=1</pre>
</div>
<p>z2:</p>
<div class="highlight-python"><pre>[00][01][10][11]
[02][03][12][13]

http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=00
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=01
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=02
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=03
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=10
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=11
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=12
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=13</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">etc</span><span class="o">...</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Services de tuilage supportés</a><ul>
<li><a class="reference internal" href="#tms-service">Service TMS</a></li>
<li><a class="reference internal" href="#kml-service">Service KML</a></li>
<li><a class="reference internal" href="#ogc-wmts-service">Service WMTS OGC</a></li>
<li><a class="reference internal" href="#ogc-wms-service">Service WMS OGC</a></li>
<li><a class="reference internal" href="#googlemaps-xyz-service">Service XYZ GoogleMaps</a><ul>
<li><a class="reference internal" href="#v2-api">API V2</a></li>
<li><a class="reference internal" href="#v3-api">API V3</a></li>
</ul>
</li>
<li><a class="reference internal" href="#virtual-earth-tile-service">Service de tuilage Virtual Earth</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="seed.html" title="Alimentation du cache"
             >suivant</a> |</li>
        <li class="right" >
          <a href="config.html" title="Fichier de configuration"
             >précédent</a> |</li>
        <li><a href="../index.html">Home</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation de MapServer 6.4.1</a> &raquo;</li>
          <li><a href="index.html" >MapCache</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2014, Regents of the University of Minnesota.
      Mis à jour le Saturday  5 April 2014, 16:46.
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>