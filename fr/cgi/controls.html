

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Contrôles CGI pour MapServer &mdash; MapServer 6.4.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 6.4.1 documentation" href="../index.html" />
    <link rel="up" title="CGI" href="index.html" />
    <link rel="next" title="Substitution à la volée" href="runsub.html" />
    <link rel="prev" title="Fichiers de Contexte de Carte" href="mapcontext.html" /> 
  </head>
  <body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
    
        
          <a href="../../en/cgi/controls.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
        
    
        
          <a href="../../it/cgi/controls.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
    
        
          <a href="../../es/cgi/controls.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
    
        
          <a href="../../zh_cn/cgi/controls.html"><img src="../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
        
    
        
          <a href="../../de/cgi/controls.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
    
        
          <a href="../../el/cgi/controls.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
    
        
          <a href="../../id/cgi/controls.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
    
        
          <a href="../../sq/cgi/controls.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
    
        
          <a href="../../tr/cgi/controls.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="runsub.html" title="Substitution à la volée"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="mapcontext.html" title="Fichiers de Contexte de Carte"
             accesskey="P">précédent</a> |</li>
        <li><a href="../index.html">Home</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation de MapServer 6.4.1</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">CGI</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mapserver-cgi-controls">
<span id="cgi-controls"></span><span id="index-0"></span><h1>Contrôles CGI pour MapServer<a class="headerlink" href="#mapserver-cgi-controls" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les noms de variable ne sont pas sensible à la casse.</p>
<dl class="docutils" id="index-1">
<dt>BUFFER [distance]</dt>
<dd>Une distance, dans le même système de coordonnées que le mapfile, utilisée en conjonction avec MAPXY pour créer une nouvelle étendue de carte.</dd>
</dl>
<dl class="docutils" id="index-2">
<dt>CLASSGROUP [name]</dt>
<dd>Le nom de la CLASSGROUP de l&#8217;objet <a class="reference internal" href="../mapfile/layer.html#layer"><em>LAYER</em></a>.  Définit le nom de la <cite>CLASSGROUP</cite> de l&#8217;objet <a class="reference internal" href="../mapfile/layer.html#layer"><em>LAYER</em></a> à <cite>name</cite> pour toutes les couches qui ont au moins une ref:<cite>CLASS</cite> qui utilise le <cite>name</cite> de la CLASSGROUP donnée</dd>
</dl>
<dl class="docutils" id="index-3">
<dt>CONTEXT [filename]</dt>
<dd>Chemin vers un fichier contexte. Le chemin est relatif au mapfile à utiliser ou peut être également un chemin URL (voir la section &#8220;Gestion du Web Map Context (WMC) via CGI&#8221; plus bas dans ce document pour plus de détails).</dd>
</dl>
<dl class="docutils" id="index-4">
<dt>ICON [layername],[classindex]</dt>
<dd>Utilisé avec MODE=legendicon pour générer une icône de légende pour une couche. La valeur classindex est optionnelle et vaut 0 par défaut.</dd>
</dl>
<dl class="docutils" id="index-5">
<dt>ID [id-string]</dt>
<dd>Par défaut MapServer génère un identifiant unique de session basé sur l&#8217;heure du système et l&#8217;identifiant du processus. Ce paramètre remplace la valeur par défaut.</dd>
</dl>
<dl class="docutils" id="index-6">
<dt>IMG</dt>
<dd><p class="first">Le nom associé à l&#8217;image de la carte embarquée est utilisé pour enregistrer les clics de l&#8217;utilisateur. Ce sont deux variables img.x et img.y qui sont passées.</p>
<p class="last">Pour les applications CGI c&#8217;est une variable essentielle, regardez les exemples pour son utilisation.</p>
</dd>
</dl>
<dl class="docutils" id="index-7">
<dt>IMGBOX [x1] [y1] [x2] [y2]</dt>
<dd>Coordonnées (en pixels) du cadre dessiné dans l&#8217;image. La plupart du temps utilisé en conjonction avec un frontend Java pour MapServer.</dd>
</dl>
<dl class="docutils" id="index-8">
<dt>IMGEXT [minx] [miny] [maxx] [maxy]</dt>
<dd>L&#8217;étendue spatiale de l&#8217;image embarquée existante que les utilisateurs peuvent visualiser dans leur navigateur.</dd>
</dl>
<dl class="docutils" id="index-9">
<dt>IMGSHAPE [x1 y1 x2 y2 x3 y3 ...] | [WKT]</dt>
<dd><p class="first">Un polygone arbitraire (spécifié en utilisant les <strong>coordonnées image</strong>) à utiliser pour les requêtes.</p>
<p>Le polygone est spécifié en listant des coordonnées (plusieurs instances peuvent simplement additionner des éléments d&#8217;un Shape, il est donc possible de construire un Shape avec des trous) ou en spécifiant la représentation WKT (Well Known Text)</p>
<p class="last">Utilisé avec les modes NQUERY.</p>
</dd>
</dl>
<dl class="docutils" id="index-10">
<dt>IMGSIZE [cols] [rows]</dt>
<dd>La taille (en pixels) de l&#8217;image embarquée existante.</dd>
</dl>
<dl class="docutils" id="index-11">
<dt>IMGXY [x] [y]</dt>
<dd>Coordonnées (en pixels) d&#8217;un simple clic de souris. Utilisé le plus souvent en conjonction avec un frontend Java pour MapServer.</dd>
</dl>
<dl class="docutils" id="index-12">
<dt>LAYER [name]</dt>
<dd>Le nom d&#8217;une couche tel qu&#8217;il apparaît dans le fichier map. Envoie à mapserv le nom d&#8217;une couche dont le paramètre STATUS passera à ON.</dd>
</dl>
<dl class="docutils" id="index-13">
<dt>LAYERS [name name ...]</dt>
<dd><p class="first">Les noms des couches à activer. Les noms des couches doivent être séparés par des espaces.</p>
<p class="last">Dans les versions 4.4 et supérieures : &#8216;LAYERS=all&#8217; activera automatiquement toutes les couches.</p>
</dd>
</dl>
<dl class="docutils" id="index-14">
<dt>MAP [filename]</dt>
<dd>Path, relative to the CGI directory, of the map file to be used.</dd>
</dl>
<dl class="docutils" id="index-15">
<dt>MAPEXT [minx] [miny] [maxx] [maxy] , MAPEXT (shape)</dt>
<dd><p class="first">L&#8217;étendue spatiale de la carte à créer.</p>
<p class="last">Peut être renseignée avec &#8220;shape&#8221; comme option alternative. Dans ce cas MAPEXT sera défini par l&#8217;étendue du Shape sélectionné. À utiliser avec des requêtes.</p>
</dd>
</dl>
<dl class="docutils" id="index-16">
<dt>MAPSHAPE [x1 y1 x2 y2 x3 y3 ...] | [WKT]</dt>
<dd><p class="first">Un polygone arbitraire (spécifié en utilisant les <strong>coordonnées image</strong>) à utiliser pour les requêtes.</p>
<p>Le polygone est spécifié en listant des coordonnées (plusieurs instances peuvent simplement additionner des éléments d&#8217;un Shape, il est donc possible de construire un Shape avec des trous) ou en spécifiant une représentation WKT (Well Known Text)</p>
<p class="last">Utilisé avec les modes NQUERY.</p>
</dd>
</dl>
<dl class="docutils" id="index-17">
<dt>MAPSIZE [cols] [rows]</dt>
<dd>La taille (en pixels) de l&#8217;image à créer. Particulièrement utile pour permettre aux utilisateurs de changer dynamiquement la résolution de la carte de sortie.</dd>
</dl>
<dl class="docutils" id="index-18">
<dt>MAPXY [x] [y] , MAPXY (shape)</dt>
<dd><p class="first">Un point, dans le même système de coordonnées que les fichiers Shape, à utiliser en conjonction avec un tampon (buffer) ou une échelle pour construire une étendue de carte.</p>
<p class="last">Peut être renseignée avec &#8220;shape&#8221; comme option alternative. Dans ce cas MAPEXT sera défini par l&#8217;étendue du Shape sélectionné. À utiliser avec des requêtes.</p>
</dd>
</dl>
<span class="target" id="index-19"></span><span class="target" id="index-20"></span><span class="target" id="index-21"></span><dl class="docutils" id="index-22">
<dt>MINX | MINY | MAXX | MAXY [number]</dt>
<dd>Coordonnées x/y minimales/maximales de l&#8217;étendue spatiale pour une nouvelle carte/requête. Ces paramètres sont des éléments de MAPEXT.</dd>
</dl>
<dl class="docutils" id="index-23">
<dt>MODE [value]</dt>
<dd><p class="first">Mode d&#8217;opération. Les options suivantes sont gérées :</p>
<dl class="docutils" id="index-24">
<dt>BROWSE</dt>
<dd>Interface totalement interactive dans laquelle les cartes (et les pages interactives) sont créées. Ceci est le mode par défaut.</dd>
</dl>
<dl class="docutils" id="index-25">
<dt>FEATURENQUERY</dt>
<dd>Une recherche spatiale qui utilise plusieurs entités de SLAYER pour interroger les autres couches.</dd>
</dl>
<dl class="docutils" id="index-26">
<dt>FEATUREQUERY</dt>
<dd>Une recherche spatiale qui utilise une entité de SLAYER pour interroger les autres couches.</dd>
</dl>
<dl class="docutils" id="index-27">
<dt>INDEXQUERY</dt>
<dd>Consulte une entité basée sur les valeurs des paramètres SHAPEINDEX et TILEINDEX. SHAPEINDEX est obligatoire, TILEINDEX est optionnel et est utilisé seulement avec les couches shapefile assemblées.</dd>
</dl>
<dl class="docutils" id="index-28">
<dt>ITEMFEATURENQUERY</dt>
<dd>Une recherche textuelle dans les données attributaires est déclenchée par un QSTRING. Retourne toutes les correspondances. La couche à chercher est définie en utilisant le paramètre slayer. Les résultats de cette recherche sont appliqués aux autres couches interrogeables (qui peuvent être limitées en utilisant le paramètre QLAYER).</dd>
</dl>
<dl class="docutils" id="index-29">
<dt>ITEMFEATUREQUERY</dt>
<dd>Une recherche textuelle dans les données attributaires est déclenchée par un QSTRING. Retourne la première correspondance. La couche cherchée est définie en utilisant le paramètre slayer. Les résultats de cette recherche sont appliqués aux autres couches interrogeables (qui peuvent être limitées en utilisant le paramètre QLAYER).</dd>
</dl>
<dl class="docutils" id="index-30">
<dt>ITEMNQUERY</dt>
<dd>Une recherche textuelle dans les données attributaires est déclenchée en utilisant un QTRING. Retourne toutes les correspondances.</dd>
</dl>
<dl class="docutils" id="index-31">
<dt>ITEMQUERY</dt>
<dd>Une recherche textuelle dans les données attributaires est déclenchée en utilisant une couche QTRING. Retourne la première correspondance.</dd>
</dl>
<dl class="docutils" id="index-32">
<dt>LEGEND</dt>
<dd>La légende créée est retournée. Utilisé avec une balise &lt;img ... &gt;.</dd>
</dl>
<dl class="docutils" id="index-33">
<dt>LEGENDICON</dt>
<dd><p class="first">Une icône de légende est retournée. Le paramètre ICON peut également être utilisé pour spécifier le nom de la couhe et un index de classe. La valeur de l&#8217;index de classe est optionnelle et vaut 0 par défaut. Par exemple :</p>
<div class="last highlight-python"><pre>mapserv.exe?map=/mapfiles/gmap75.map&amp;MODE=legendicon&amp;ICON=popplace,0</pre>
</div>
</dd>
</dl>
<dl class="docutils" id="index-34">
<dt>MAP</dt>
<dd>La carte créée est retournée. Utilisé avec une balise &lt;img ... &gt;.</dd>
</dl>
<dl class="docutils" id="index-35">
<dt>NQUERY</dt>
<dd>Une recherche spatiale (trouve tout) est déclenchée par un clic sur une carte ou par un cadre de sélection défini par l&#8217;utilisateur.</dd>
</dl>
<dl class="docutils" id="index-36">
<dt>QUERY</dt>
<dd>Une recherche spatiale (trouve le plus proche) est déclenchée par un clic sur une carte.</dd>
</dl>
<dl class="docutils" id="index-37">
<dt>REFERENCE</dt>
<dd>La carte de référence créée est retournée. Utilisé avec une balise &lt;img ... &gt;.</dd>
</dl>
<dl class="docutils" id="index-38">
<dt>SCALEBAR</dt>
<dd>L&#8217;échelle créée est retournée. Utilisé avec une balise &lt;img ... &gt;.</dd>
</dl>
<dl class="docutils" id="index-39">
<dt>ZOOMIN</dt>
<dd>Modifie le mode de navigation (BROWSE) avec ZOOMDIR=1.</dd>
</dl>
<dl class="docutils" id="index-40">
<dt>ZOOMOUT</dt>
<dd>Modifie le mode de navigation (BROWSE) avec ZOOMDIR=-1.</dd>
</dl>
<dl class="docutils" id="index-41">
<dt>COORDINATE</dt>
<dd>À clarifier.</dd>
</dl>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les modes d&#8217;interrogation de type &#8220;map&#8221; antérieurement disponibles, c&#8217;est à dire ITEMQUERYMAP, ne sont plus maitenant supportés. Le paramètre <cite>QFORMAT</cite> est maintenant utilisé à la place.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="index-42">
<dt>QFORMAT [outputformat | mime/type] (optional)</dt>
<dd><p class="first">Le format <cite>OUTPUTFORMAT</cite> ou le mime/type à utiliser pour traiter un jeu de résultats de requête (correspond au paramètre QUERYFORMAT de l&#8217;objet <a class="reference internal" href="../mapfile/web.html#web"><em>WEB</em></a>). Le paramètre est optionnel et utilisé en conjonction avec les <cite>MODE</cite>s de requête.  La valeur par défaut est text/html.</p>
<p>Exemple (carte en sortie) :</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="o">...&amp;</span><span class="n">mode</span><span class="o">=</span><span class="n">nquery</span><span class="o">&amp;</span><span class="n">qformat</span><span class="o">=</span><span class="n">png24</span><span class="o">&amp;...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="index-43">
<dt>QITEM [name] (optional)</dt>
<dd>Le nom d&#8217;un attribut dans la table attributaire d&#8217;une couche à interroger. Le paramètre est optionnel et est utilisé en conjonction avec QSTRING pour les requêtes attributaires.</dd>
</dl>
<dl class="docutils" id="index-44">
<dt>QLAYER [name]</dt>
<dd>Interrogation de couche. Le nom de la couche qui doit être interrogée tel qu&#8217;il apparaît dans le mapfile.</dd>
</dl>
<dl class="docutils" id="index-45">
<dt>QSTRING [expression]</dt>
<dd>Requêtes d&#8217;attribut: chaîne de requête passée à la fonction de requête. Depuis la version 5.0, qstring devra être spécifié dans le paramètre <cite>VALIDATION</cite> de la <cite>LAYER</cite> pour les requêtes qstring fonctionnent (<em>qstring_validation_pattern</em> <cite>METADATA</cite> au niveau de <cite>LAYER</cite> pour les versions de MapServer avant 5.4).</dd>
</dl>
<dl class="docutils" id="index-46">
<dt>QUERYFILE [filename]</dt>
<dd>Utilisé avec les modes BROWSE ou NQUERY. Cette option identifie un fichier requête à charger avant tout processus régulier. Dans le mode BROWSE cela produit une carte requise à la place d&#8217;une carte normale. Ceci est utile quand vous voulez mettre en évidence une entité lors d&#8217;un changement de zoom (mode pan/zoom). Dans le mode NQUERY vous obtenez l&#8217;accès à l&#8217;un des modèles utilisés normalement dans la présentation de la requête, ainsi vous avez accès aux cartes requises ET aux informations attributaires. Voyez l&#8217;option SAVEQUERY.</dd>
</dl>
<dl class="docutils" id="index-47">
<dt>REF</dt>
<dd><p class="first">Le nom associé à l&#8217;image embarquée de la carte de référence utilisé pour enregistrer les clics de l&#8217;utilisateur. Deux variables sont passées, ref.x et ref.y.</p>
<p class="last">Pour les applications CGI ce sont des variables essentielles quand les cartes de référence sont utilisées, voyez les exemples.</p>
</dd>
</dl>
<dl class="docutils" id="index-48">
<dt>REFXY [x] [y]</dt>
<dd>Coordonnées (en pixels) d&#8217;un simple clic de souris sur l&#8217;image de référence. Utilisé en conjonction avec une frontend Java pour MapServer.</dd>
</dl>
<dl class="docutils" id="index-49">
<dt>SAVEQUERY</dt>
<dd>Échelle pour créer une nouvelle carte. L&#8217;échelle donnée est le dénominateur de la fraction de l&#8217;échelle réelle, par exemple pour une carte d&#8217;échelle 1:24000, utilisez 24000. Implémenté dans MapServer 5.0 pour remplacer le paramètre obsolète SCALE.</dd>
</dl>
<dl class="docutils" id="index-50">
<dt>SCALEDENOM [number]</dt>
<dd>Échelle pour créer une nouvelle carte. L&#8217;échelle donnée est le dénominateur de la fraction de l&#8217;échelle réelle, par exemple pour une carte d&#8217;échelle 1:24000, utilisez 24000. Implémenté dans MapServer 5.0 pour remplacer le paramètre obsolète SCALE.</dd>
<dt>SCALE [number] - deprecated</dt>
<dd>Depuis MapServer 5.0 le bon paramètre à utiliser est SCALEDENOM à la place de SCALE. Ce paramètre obsolète est l&#8217;échelle à laquelle créer une nouvelle carte. Utilisé avec MAPXY. L&#8217;échelle donnée est le dénominateur de la fraction de l&#8217;échelle réelle, par exemple pour une carte d&#8217;échelle 1:24000, utilisez 24000.</dd>
</dl>
<dl class="docutils" id="index-51">
<dt>SEARCHMAP</dt>
<dd>Il est possible de créer des interfaces pour gérer le zoom (pan/zoom) en utilisant des querymaps. Dans ces cas, vous aimerez avoir l&#8217;information sur les contenus de la nouvelle carte plutôt que celle de la précédente carte ce qui est la façon normale de fonctionnement des requêtes. Quand SEARCHMAP est spécifié la nouvelle carte est créée et son étendue est utilisée pour les couches de requêtes. Très utile avec le mode NQUERY uniquement.</dd>
</dl>
<dl class="docutils" id="index-52">
<dt>SHAPEINDEX [index]</dt>
<dd>Utilisé pour indexer les requêtes (en combinaison avec INDEXQUERY).</dd>
</dl>
<dl class="docutils" id="index-53">
<dt>SLAYER [name]</dt>
<dd>Couche de sélection. Le nom de la couche devant être utilisé pour l&#8217;une des fonctions de recherche sur l&#8217;entité (par exemple STAGED). La couche sélectionnée doit être une couche de polygones. La ou les entités sélectionnées sont disponibles pour être présentées à l&#8217;utilisateur.</dd>
</dl>
<dl class="docutils" id="index-54">
<dt>TILEINDEX [index]</dt>
<dd>Utilisé pour indexer les requêtes (en combinaison avec INDEXQUERY), utilisé avec les couches de Shape assemblés (tiled shapefiles).</dd>
</dl>
<dl class="docutils" id="index-55">
<dt>ZOOM [number]</dt>
<dd><p class="first">Echelle de zoom à appliquer lors de la création d&#8217;une nouvelle carte. Les valeurs supérieures à 0 indiquent un agrandissement (zoom in), 0 pour la vue d&#8217;ensemble (pan), et les valeurs négatives indiquent un rétrécissement (zoom out). Une valeur de 2 indique un &#8220;agrandissement par deux&#8221;.</p>
<p class="last">ZOOM peut être utilisé comme un raccourci de la combinaison ZOOMDIR/ZOOMSIZE. Le zoom est limité par le paramètre MINZOOM/MAXZOOM compilé dans MapServer (-25/25) par défaut.</p>
</dd>
</dl>
<dl class="docutils" id="index-56">
<dt>ZOOMDIR [1 | 0 | -1]</dt>
<dd>Direction du zoom. Voir ci-dessus.</dd>
</dl>
<dl class="docutils" id="index-57">
<dt>ZOOMSIZE [number]</dt>
<dd><p class="first">Grandeur absolue d&#8217;un zoom. Utilisé avec ZOOMDIR.</p>
<p class="last">ZOOMDIR est limité par MAXZOOM compilé dans MapServer (25 par défaut).</p>
</dd>
</dl>
</div>
<div class="section" id="changing-map-file-parameters-via-a-form-or-a-url">
<span id="cgi-mapfile-change-parameters"></span><span id="index-58"></span><h2>Modifier les paramètres du fichier map à l&#8217;aide d&#8217;un formulaire ou d&#8217;une URL<a class="headerlink" href="#changing-map-file-parameters-via-a-form-or-a-url" title="Lien permanent vers ce titre">¶</a></h2>
<p>À partir de la version 3.3 il est possible de changer virtuellement toute valeur du mapfile via un formulaire ou une URL (voir <a class="reference internal" href="runsub.html#runsub"><em>Substitution à la volée</em></a>). La syntaxe pour cela est assez simple et dépend de la version de MapServer que vous utilisez. Une utilisation potentielle très puissante de cette capacité à changer les paramètres du mapfile via une URL implique un changement, à la volée, des expressions de classe. <cite>VALIDATION</cite> est utilisé pour contrôler la substition à la volée. Essayer cette fonctionnalité..</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Cette fonctionnalité est seulement disponible via l&#8217;application CGI <a class="reference internal" href="mapserv.html#mapserv"><em>mapserv</em></a>. A l&#8217;aide de MapScript, il est facile de le faire par soi-même comme le développeur a un contrôle total sur la manière dont l&#8217;entrée est gérée.</p>
</div>
<div class="section" id="using-mapserver-version-5">
<h3>Utilisation d&#8217;une version de MapServer &gt;= 5<a class="headerlink" href="#using-mapserver-version-5" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les versions précédentes du programme MapServer CGI permettaient de changer certains paramètres via une URL en utilisant une syntaxe lourd</p>
<p>Exemple 1, changement de l&#8217;objet scalebar :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...&amp;</span><span class="nb">map</span><span class="o">.</span><span class="n">scalebar</span><span class="o">=</span><span class="n">UNITS</span><span class="o">+</span><span class="n">MILES</span><span class="o">+</span><span class="n">COLOR</span><span class="o">+</span><span class="mi">121</span><span class="o">+</span><span class="mi">121</span><span class="o">+</span><span class="mi">121</span><span class="o">+</span><span class="n">SIZE</span><span class="o">+</span><span class="mi">300</span><span class="o">+</span><span class="mi">2</span><span class="o">&amp;...</span>
</pre></div>
</div>
<p>Exemple 2, changement du style de présentation :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...&amp;</span><span class="nb">map</span><span class="o">.</span><span class="n">layer</span><span class="p">[</span><span class="n">lakes</span><span class="p">]</span><span class="o">.</span><span class="n">class</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">SYMBOL</span><span class="o">+</span><span class="n">crosshatch</span><span class="o">+</span><span class="n">COLOR</span><span class="o">+</span><span class="mi">151</span><span class="o">+</span><span class="mi">51</span><span class="o">+</span><span class="mi">151</span><span class="o">+</span><span class="n">SIZE</span><span class="o">+</span><span class="mi">15</span><span class="o">&amp;...</span>
</pre></div>
</div>
<p>Exemple 3, création d&#8217;une nouvelle entité :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...&amp;</span><span class="n">map_layer</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span><span class="n">FEATURE</span><span class="o">+</span><span class="n">POINTS</span><span class="o">+</span><span class="mi">500000</span><span class="o">+</span><span class="mi">1000000</span><span class="o">+</span><span class="n">END</span><span class="o">+</span><span class="n">TEXT</span><span class="o">+</span><span class="s">&#39;A+test+point&#39;</span><span class="o">+</span><span class="n">END</span><span class="o">&amp;...</span>
</pre></div>
</div>
<p>Exemple 4, définition des paramètres de plusieurs objets web :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...&amp;</span><span class="n">map_web</span><span class="o">=</span><span class="n">imagepath</span><span class="o">+/</span><span class="n">ms4w</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ms_tmp</span><span class="o">/+</span><span class="n">imageurl</span><span class="o">+/</span><span class="n">ms_tmp</span><span class="o">/</span>
</pre></div>
</div>
<p>Exemple 5, définition de la taille de la carte :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...&amp;</span><span class="n">map_size</span><span class="o">=</span><span class="mi">800</span><span class="o">+</span><span class="mi">400</span>
</pre></div>
</div>
<p>La variable identifie un objet unique (par son nom ou son index dans le cas de layerObj et de classObj). La valeur est un extrait d&#8217;un mapfile. Vous ne pouvez pas créer de nouveaux objets autres que les entités embarquées à ce niveau.</p>
</div>
<div class="section" id="id1">
<h3>Utilisation d&#8217;une version de MapServer &lt; 5<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour les versions de MapServer &lt; 5, toute valeur peut être exprimée en utilisant la hiérarchie du mapfile. Une carte contient une couche, qui contient une classe, qui contient une étiquette (label), qui a une couleur. Cette hiérarchie est exprimée comme une séquence de mots-clés MapServer séparés par des underscores. Par exemple pour changer la couleur d&#8217;une couche nommée &#8220;lakes&#8221; avec une seule classe définie, vous devriez utiliser une variable de formulaire nommée &#8220;map_lakes_class_color&#8221; et lui assigner une couleur comme &#8220;0 0 255&#8221;. Les couches peuvent être référencées par un index (par exemple map_layer_0...) ou par un nom comme montré ci-dessus. Les classes de couche sont référencées par une valeur d&#8217;index (par exemple map_layer_0_class_2). S&#8217;il n&#8217;y a qu&#8217;une seule classe pour une couche alors l&#8217;index devrait être omis. Ces variables doivent toujours commencer par la séquence &#8220;<a href="#id2"><span class="problematic" id="id3">map_</span></a>&#8221;. Les valeurs assignées doivent être conformes à la syntaxe d&#8217;un mapfile.</p>
<p>Il est également possible de définir des entités embarquées en utilisant ce mécanisme. C&#8217;est le seul cas où vous pouvez ajouter quelque chose au mapfile. Vous pouvez éditer/changer les paramètres de la couche mais vous ne pouvez pas créer une nouvelle couche. Avec les entités embarquées vous devez d&#8217;abord créer une entité et ensuite construire sur cette ase, cependant, la couche à laquelle appartient l&#8217;entité doit exister. Voici un extrait d&#8217;une requête GET qui ajoute une entité à une couche utilisateur :</p>
<div class="highlight-python"><pre>...&amp;map_webuser_feature=new&amp;map_webuser_feature_points=12345.6789+12345.6789
      &amp;map_webuser_feature_text=My+House!&amp;...</pre>
</div>
<p>Le &#8220;map_webuser_feature=new&#8221; crée une nouvelle entité pour la couche utilisateur. Tous les appels ultérieurs à cet objet entité pour cette couche modifieront la nouvelle entité. Vous pouvez répéter ce processus pour créer des entités supplémentaires. Ceci reste réellement applicable pour de très petits ensembles de données (point, rectangle).</p>
</div>
</div>
<div class="section" id="specifying-the-location-of-mapfiles-using-an-apache-variable">
<span id="index-59"></span><h2>Spécification de l&#8217;emplacement des mapfiles utilisant une variable Apache<a class="headerlink" href="#specifying-the-location-of-mapfiles-using-an-apache-variable" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les variables Apache peuvent être utilisées pour spécifier l&#8217;emplacement de fichiers map (plutôt que d&#8217;exposer les chemins complets de mapfile au monde extérieur).</p>
<ol class="arabic">
<li><p class="first">Définir la variable (dans cet exemple <cite>MY_MAPFILE</cite>) dans le httpd.conf de Apache:</p>
<div class="highlight-python"><pre>SetEnv MY_MAPFILE "/opt/mapserver/map1/mymapfile.map"</pre>
</div>
</li>
<li><p class="first">Se référer à la variable dans l&#8217;URL CGI de MapServer :</p>
<div class="highlight-python"><pre>http://localhost/cgi-bin/mapserv?map=MY_MAPFILE&amp;mode=...</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="rosa-applet-controls">
<span id="index-60"></span><h2>Contrôles de l&#8217;applet ROSA<a class="headerlink" href="#rosa-applet-controls" title="Lien permanent vers ce titre">¶</a></h2>
<p><em>Note : le développement et la maintenance de ROSA ont été stoppés.</em></p>
<p>Les paramètres de l&#8217;applet ROSA ont été ajoutés à MapServer CGI dans la version 3.6. Cette applet Java fournit une interface utilisateur plus intuitive à MapServer. Le site MapTools fournit des informations détaillées sur l&#8217;applet ROSA.</p>
<p>Les paramètres peuvent également être utilisés par d&#8217;autres interfaces et outils s&#8217;ils ont les bonnes valeurs. Veuillez noter que les deux paramètres doivent être envoyés à l&#8217;application CGI  dans l&#8217;ordre indiqué ci-dessous.</p>
<dl class="docutils">
<dt>INPUT_TYPE (auto_rect | auto_point)</dt>
<dd>Le paramètre INPUT_TYPE est nécessaire pour identifier si les coordonnées envoyées à MapServer doivent être interprétées comme un rectangle ou une donnée ponctuelle.</dd>
<dt>INPUT_COORD [minx,miny;maxx,maxy]</dt>
<dd>L&#8217;applet ROSA renseigne toujours la paire de coordonnées. Dans le cas d&#8217;un point (input_type=auto_point) les coordonnées min et max sont égales (Mapserver utilise la valeur min).</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Contrôles CGI pour MapServer</a><ul>
<li><a class="reference internal" href="#variables">Variables</a></li>
<li><a class="reference internal" href="#changing-map-file-parameters-via-a-form-or-a-url">Modifier les paramètres du fichier map à l&#8217;aide d&#8217;un formulaire ou d&#8217;une URL</a><ul>
<li><a class="reference internal" href="#using-mapserver-version-5">Utilisation d&#8217;une version de MapServer &gt;= 5</a></li>
<li><a class="reference internal" href="#id1">Utilisation d&#8217;une version de MapServer &lt; 5</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specifying-the-location-of-mapfiles-using-an-apache-variable">Spécification de l&#8217;emplacement des mapfiles utilisant une variable Apache</a></li>
<li><a class="reference internal" href="#rosa-applet-controls">Contrôles de l&#8217;applet ROSA</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="runsub.html" title="Substitution à la volée"
             >suivant</a> |</li>
        <li class="right" >
          <a href="mapcontext.html" title="Fichiers de Contexte de Carte"
             >précédent</a> |</li>
        <li><a href="../index.html">Home</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation de MapServer 6.4.1</a> &raquo;</li>
          <li><a href="index.html" >CGI</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2014, Regents of the University of Minnesota.
      Mis à jour le Saturday  5 April 2014, 16:46.
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>