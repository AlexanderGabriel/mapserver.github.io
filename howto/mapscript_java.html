<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &mdash; MapServer 7.0.0-beta1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0-beta1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0-beta1 documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../it/howto/mapscript_java.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../es/howto/mapscript_java.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../zh_cn/howto/mapscript_java.html"><img src="../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
        
        
          <a href="../de/howto/mapscript_java.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/howto/mapscript_java.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../fr/howto/mapscript_java.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/howto/mapscript_java.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../sq/howto/mapscript_java.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/howto/mapscript_java.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>&lt;a name=&#8221;N1000C&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;My+Notes&#8221;&gt;&lt;/a&gt;
&lt;h3&gt;My Notes&lt;/h3&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>Many people ask questions about Java MapScript on &lt;em&gt;mapserver-users&lt;/em&gt;. This is an attempt
to record my answers to them, my impressions on mapserver and Java MapScript.
Before you proceed I must warn you that the following are my opinions and
they might not be endorsed or approved by the mapserver community at all.
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>Most of this is &lt;strong&gt;LINUX&lt;/strong&gt; specific, but some is general.
&lt;/p&gt;</dd>
</dl>
<p>&lt;/div&gt;</p>
<p>&lt;a name=&#8221;N1001F&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Building+Java+MapScript&#8221;&gt;&lt;/a&gt;
&lt;h3&gt;Building Java MapScript&lt;/h3&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>Guidelines for building a working Java MapScript.
&lt;/p&gt;</div></blockquote>
<p>&lt;a name=&#8221;N10028&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;The+Golden+Rule:+KISS!+(Keep+it+simple,+stup^H^H^H^sir!)&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;The Golden Rule: KISS! (Keep it simple, stup^H^H^H^sir!)&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>MapServer is really a big piece of software with plenty of functionalities (some say it is the most advanced web
mapping software) and chances are you do need all of them. If you are a newbie to mapserver
or to Java mapscript try to understand what you need and stick with it, removing the unneeded features.
&lt;br /&gt;
This approach is generally suggested because:
&lt;/p&gt;</div></blockquote>
<p>&lt;ul&gt;</p>
<dl class="docutils">
<dt>&lt;li&gt;it reduces the number of lines of code involved and thus reduces the number of possible</dt>
<dd>bugs that could bite&lt;/li&gt;</dd>
</dl>
<p>&lt;li&gt;it makes for a smaller binary which is more efficient&lt;/li&gt;</p>
<dl class="docutils">
<dt>&lt;li&gt;in case of a crash the number of suspects is lower and will speed up investigation</dt>
<dd>and in some cases resolution&lt;/li&gt;</dd>
<dt>&lt;li&gt;it requires less software to be installed on your computer which makes it easier to</dt>
<dd>mantain in the long term&lt;/li&gt;</dd>
</dl>
<p>&lt;li&gt;the first three items apply (with recursion) to the previous&lt;/li&gt;</p>
<dl class="docutils">
<dt>&lt;li&gt;if you ask for help on the mailing list the first general advice is to remove components you</dt>
<dd>don&#8217;t use: so do it in advance&lt;/li&gt;</dd>
</dl>
<p>&lt;/ul&gt;
&lt;p&gt;</p>
<blockquote>
<div>See &lt;a href=&#8221;#compile&#8221;&gt;below&lt;/a&gt; for a example of a basic (but working) mapserver/mapscript build example.
&lt;/p&gt;</div></blockquote>
<p>&lt;/div&gt;
&lt;a name=&#8221;N10050&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;How+do+I+disable+option+X?&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;How do I disable option X?&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>Chances are that even if you do not need tiff or mysql support it will get built in anyway
because the configure script detects their libraries. In all cases you should review
the output of the configure script and then use the proper command line argument to disable unwanted
features.
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>When running the &lt;em&gt;./configure&lt;/em&gt; program use the
&lt;em&gt;&#8211;disable-X&lt;/em&gt; option. You can get the list of available options by running:
&lt;/p&gt;</dd>
</dl>
<p>&lt;pre class=&#8221;code&#8221;&gt;./configure &#8211;help&lt;br /&gt;                      &lt;/pre&gt;
&lt;/div&gt;
&lt;a name=&#8221;N10068&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Know+your+enemy&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;Know your enemy&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>Certain libraries/features are known &lt;strong&gt;NOT&lt;/strong&gt; to work with mapscript because they are not thread-safe.
Be sure not to enable them at compile time or you will get errors that will crash the JVM.
You can review the list of unsafe components &lt;img src=&#8221;/images/link-ext.gif&#8221; align=&#8221;middle&#8221; /&gt;&lt;a href=&#8221;../../faq/thread_safety&#8221;&gt;here&lt;/a&gt;.
&lt;/p&gt;</div></blockquote>
<p>&lt;/div&gt;
&lt;a name=&#8221;N10079&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Know+your+enemy+(part+2:+gdal+and+tiff)&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;Know your enemy (part 2: gdal and tiff)&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>If you need raster support through GDAL disable tiff (using &lt;em&gt;&#8211;without-tiff&lt;/em&gt;) because they don&#8217;t play well
with each other.
&lt;/p&gt;</div></blockquote>
<p>&lt;/div&gt;
&lt;a name=&#8221;N10086&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Know+your+enemy+(part+3:+pdf)&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;Know your enemy (part 3: pdf)&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>PDF is supported as an output format, but it is not worth the price of risking a buggy mapscript.
A better solution is to incorporate the image in a PDF document by using a pure Java library like the excellent
&lt;em&gt;iText&lt;/em&gt;.
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>By doing so you will be able to customize headers, footers, paper format and transparencies will also work as supposed.
iText additionally supports PDF encryption to disallow printing, editing or modification.
&lt;/p&gt;</dd>
<dt>&lt;p&gt;</dt>
<dd>Also remember that PDF output in mapserver cannot make use of an embedded scalebar because pixmap
fonts are not supported.
&lt;/p&gt;</dd>
</dl>
<p>&lt;/div&gt;
&lt;a name=&#8221;N10099&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Know+your+enemy+(part+4:+connection+pooling)&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;Know your enemy (part 4: connection pooling)&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>Connection pooling is locked hence thread safe, but as of version 4.8.x (that is until Feb 2006)
it has known memory leaks. There is an issue on bugzilla that tracks this problem with Oracle.&lt;br /&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;img src=&#8221;/images/link-ext.gif&#8221; align=&#8221;middle&#8221; /&gt;&lt;a href=&#8221;../../../bugs/show_bug.cgi?id=1662&#8221;&gt;http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=1662&lt;/a&gt;.</dt>
<dd>&lt;/p&gt;</dd>
<dt>&lt;p&gt;</dt>
<dd>Until that is cleared you can use connection pooling, just make sure that once in a while the application is
restarted or you will eventually run out of memory. How often this should happen depends on the number
of database connections defined in the map and the number of users. Sites with 1 or two database connections and
moderate to low use could reboot the application (that is the tomcat process in case of web apps) once a day.
&lt;/p&gt;</dd>
</dl>
<p>&lt;div class=&#8221;frame note&#8221;&gt;
&lt;div class=&#8221;label&#8221;&gt;Note&lt;/div&gt;
&lt;div class=&#8221;content&#8221;&gt;</p>
<blockquote>
<div>There is no way to disable connection pooling.
&lt;/div&gt;</div></blockquote>
<p>&lt;/div&gt;
&lt;p&gt;</p>
<p>&lt;/p&gt;
&lt;/div&gt;
&lt;a name=&#8221;N100B2&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Know+your+friends&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;Know your friends&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>Java MapScript will &lt;strong&gt;NEVER&lt;/strong&gt; work without the following configure flag: &lt;em&gt;&#8211;with-threads&lt;/em&gt;.
Do not complain about you JVM going belly up on the mailing lists if you do not have enabled
this option.
&lt;/p&gt;</div></blockquote>
<p>&lt;/div&gt;
&lt;a name=&#8221;N100C2&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;compile&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;The proper way to compile mapscript is...&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>To use mapserver and mapscript you will quite likely need to download and install
many other libraries and this might not particularly easy as most of
them (gdal, for instance) do not have a binary rpm for linux.&lt;br /&gt;
You have then to find, download all of them and install one by one, solving
dependencies by hand. If this is not what you want and need a more portable
,reliable and easier to deploy environment you should seriously consider
&lt;img src=&#8221;/images/link-ext.gif&#8221; align=&#8221;middle&#8221; /&gt;&lt;a href=&#8221;<a class="reference external" href="http://fwtools.maptools.org/">http://fwtools.maptools.org/</a>&#8220;&gt;fwtools&lt;/a&gt;. Fwtools is collection of the most popular
libraries used with mapserver already compiled and ready to run on almost
any linux distribution.&lt;br /&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;a href=&#8221;#againstFwtools&#8221;&gt;This section&lt;/a&gt; describes how to compile mapserver</dt>
<dd>and Java mapscript against fwtools.
&lt;/p&gt;</dd>
<dt>&lt;p&gt;</dt>
<dd>The proper way to compile is to carefully select options as described above, then to run make,
cd into mapscript/java and run:
&lt;/p&gt;</dd>
</dl>
<p>&lt;pre class=&#8221;code&#8221;&gt;make interface&lt;br /&gt;make&lt;br /&gt;make test&lt;br /&gt;                         &lt;/pre&gt;
&lt;p&gt;</p>
<blockquote>
<div>Make interface requires that you have &lt;img src=&#8221;/images/link-ext.gif&#8221; align=&#8221;middle&#8221; /&gt;&lt;a href=&#8221;<a class="reference external" href="http://www.swig.org">http://www.swig.org</a>&#8220;&gt;swig&lt;/a&gt; installed, at least version 1.3.21.
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>My configure options to build mapscript with support for raster (through gdal), truetype fonts (through freetype),
shape files (native, cannot be disabled), projection (through proj) are:
&lt;/p&gt;</dd>
</dl>
<p>&lt;pre class=&#8221;code&#8221;&gt;./configure &#8211;with-freetype &#8211;without-tiff &#8211;with-gdal=/opt/gdal/bin/gdal-config &#8211;with-proj &#8211;without-pdf &#8211;with-threads&lt;br /&gt;                               &lt;/pre&gt;
&lt;p&gt;</p>
<blockquote>
<div>These are known to work (for me at least :-)) and are used in production sites. Note that proj, even
if it not used, is required for good operation of mapserver.
&lt;/p&gt;</div></blockquote>
<p>&lt;/div&gt;
&lt;a name=&#8221;N100F2&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;againstFwtools&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;Compiling against fwtools&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>Download &lt;img src=&#8221;/images/link-ext.gif&#8221; align=&#8221;middle&#8221; /&gt;&lt;a href=&#8221;<a class="reference external" href="http://fwtools.maptools.org/">http://fwtools.maptools.org/</a>&#8220;&gt;fwtools&lt;/a&gt; and install it. I usually install it in &lt;em&gt;/opt/FWTools-1.0.0b2&lt;/em&gt;.
Cd into the lib subdirectory and run the following two commands:
&lt;/p&gt;</div></blockquote>
<p>&lt;pre class=&#8221;code&#8221;&gt;ln -s libpng.so.2 libpng.so&lt;br /&gt;ln -s libfreetype.so.6 libfreetype.so&lt;br /&gt;                          &lt;/pre&gt;
&lt;p&gt;</p>
<blockquote>
<div>This is required for mapserver configure script to find and use the freetype
and png libraries shipping with fwtools.
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>Download latest mapserver and unpack it, then compile it with the following
configuration:
&lt;/p&gt;</dd>
</dl>
<p>&lt;pre class=&#8221;code&#8221;&gt;./configure &#8211;enable-debug &#8211;with-threads &#8211;without-pdf &#8211;without-tiff &lt;br /&gt;  &#8211;with-gdal=/opt/FWTools-1.0.0b2/bin/gdal-config &#8211;with-proj=/opt/FWTools-1.0.0b2/ &lt;br /&gt;  &#8211;with-gd=/opt/FWTools-1.0.0b2 &#8211;with-freetype=/opt/FWTools-1.0.0b2 &lt;br /&gt;  &#8211;with-png=/opt/FWTools-1.0.0b2 &#8211;with-zlib=/opt/FWTools-1.0.0b2 &#8211;with-jpeg=/opt/FWTools-1.0.0b2&lt;br /&gt;                              &lt;/pre&gt;
&lt;p&gt;</p>
<blockquote>
<div>Before you run mapserver or mapscript make sure you load the fwtools environment by running
&lt;em&gt;/opt/FWTools-1.0.0b2/fwtools_env.sh&lt;/em&gt;.
&lt;/p&gt;</div></blockquote>
<p>&lt;/div&gt;
&lt;a name=&#8221;N10119&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;What&#8217;s+the+deal+with+&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;What&#8217;s the deal with make interface?&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>When I first used Java mapscript in 2003 running swig was a necessary prerequisite to
generate the Java and c wrapper files as the source distribution did not have any. There was a problem
though: swig would generate Java methods and c wrappers for all mapserver components (like postgis, wfs or ogr)
regardeless of the fact that they were enabled in the &lt;em&gt;configure&lt;/em&gt; phase.
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>Then I submitted bug &lt;img src=&#8221;/images/link-ext.gif&#8221; align=&#8221;middle&#8221; /&gt;&lt;a href=&#8221;../../../bugs/show_bug.cgi?id=876&#8221;&gt;#876&lt;/a&gt; along with a patch which would
let swig know of which components were enabled and consequently generate Java and c wrappers only for them.
For the patch to work the user &lt;strong&gt;had to&lt;/strong&gt; run make interface.
&lt;/p&gt;</dd>
<dt>&lt;p&gt;</dt>
<dd>The problem then was that a rather new version of swig was required, which was not available on all distros
so the developers decided to provide a default version of the Java and c wrappers to help those who
did not have a recent swig (at least 1.3.21). That issue should be overcome by now as all
linux distros should ship with a swig version that is two years old!
&lt;br /&gt;
So, if you have a recent version of swig (run &lt;em&gt;swig -version&lt;/em&gt; to know) you should run make interface
to update your Java and c wrappers, even if the README does not recommend it.
&lt;/p&gt;</dd>
</dl>
<p>&lt;/div&gt;
&lt;/div&gt;</p>
<p>&lt;a name=&#8221;N1013C&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Running+Java+MapScript+(on+Linux)&#8221;&gt;&lt;/a&gt;
&lt;h3&gt;Running Java MapScript (on Linux)&lt;/h3&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>To correctly run any Java MapScript application (be it a servlet, jsp page or a standalone graphical client)
you need to let the Java Virtual Machine know where to find two pieces of software:
&lt;/p&gt;</div></blockquote>
<p>&lt;ol&gt;</p>
<p>&lt;li&gt;</p>
<p>&lt;em&gt;libmapscript.so&lt;/em&gt; whose role is to tie together mapserver and Java&lt;/li&gt;</p>
<p>&lt;li&gt;</p>
<p>&lt;em&gt;mapscript.jar&lt;/em&gt; which provides the mapserver Java objects which interface with libmapscript.so&lt;/li&gt;</p>
<p>&lt;/ol&gt;
&lt;p&gt;</p>
<blockquote>
<div>The location of the second must be specified on the classpath by means of the &lt;em&gt;CLASSPATH&lt;/em&gt; environment variable
or the &lt;em&gt;-cp&lt;/em&gt; option. The location of the first can be specified using the &lt;em&gt;LD_LIBRARY_PATH&lt;/em&gt; variable or the
&lt;em&gt;-Djava.library.path&lt;/em&gt; option. For an example see the &lt;em&gt;make test&lt;/em&gt; command you ran after compiling mapscript.
&lt;/p&gt;</div></blockquote>
<p>&lt;a name=&#8221;N10166&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Dealing+with+unresolved+dependencies&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;Dealing with unresolved dependencies&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>If your Java application brings up an error like the following:
&lt;/p&gt;</div></blockquote>
<p>&lt;pre class=&#8221;code&#8221;&gt;javac -classpath ./:examples/:./mapscript.jar -d examples/ examples/<em>.java&lt;br /&gt;java -classpath ./:examples/:./mapscript.jar -Djava.library.path=. DumpShp ../../tests/point.shp&lt;br /&gt;java.lang.UnsatisfiedLinkError: /opt-4.4.2/mapscript/java/libmapscript.so:&lt;br /&gt;        libgdal.so.1: cannot open shared object file: No such file or directory&lt;br /&gt;make: **</em> [test] Error 255&lt;br /&gt;                           &lt;/pre&gt;
&lt;p&gt;</p>
<blockquote>
<div>it means that the gdal library was not found by the linker: this is probably due to the fact that gdal
was not supplied by your Linux distro and you installed it from source. In this case you must find the directory
where &lt;em&gt;libgdal.so.1&lt;/em&gt; is and then add it to the &lt;em&gt;LD_LIBRARY_PATH&lt;/em&gt; or the &lt;em&gt;-Djava.library.path&lt;/em&gt;.
&lt;/p&gt;</div></blockquote>
<p>&lt;a name=&#8221;N10180&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Specifying+the+library+name&#8221;&gt;&lt;/a&gt;
&lt;h5&gt;Specifying the library name&lt;/h5&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>When the JVM attempts to load the shared library it will look by default for a file named &lt;em&gt;libmascript.so&lt;/em&gt;
in one of the system directories or in those specified by &lt;em&gt;LD_LIBRARY_PATH&lt;/em&gt; or &lt;em&gt;-Djava.library.path&lt;/em&gt;.&lt;br /&gt;
If necessary one can tell the JVM to load a shared library with a different name by passing the following
argument to the &lt;em&gt;java&lt;/em&gt; interpreter: &lt;em&gt;-Dmapserver.library.name=yourname&lt;/em&gt;. For instance to load
an hypothetical library named libmapscript-debug.so:
&lt;/p&gt;</div></blockquote>
<p>&lt;pre class=&#8221;code&#8221;&gt;java -Dmapserver.library.name=mapscript-debug MyJavaProgram&lt;br /&gt;                                     &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</p>
<p>&lt;a name=&#8221;N101A2&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;Learning+Java+MapScript&#8221;&gt;&lt;/a&gt;
&lt;h3&gt;Learning Java MapScript&lt;/h3&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>If you got this far then by now you probably want to know how to do X in Java MapScript? (replace X with query, zoom, etc).
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>To date there is not a tutorial, nor code that you can look at (besides the examples, but that&#8217;s not much frankly),
so the best thing you can do is take the php mapscript example form the mapserver web site and &lt;em&gt;translate&lt;/em&gt; it
to Java. This is how I did the first time and somehow it worked.
&lt;/p&gt;</dd>
<dt>&lt;p&gt;</dt>
<dd>Additional documentation is in the mapserver sources in &lt;em&gt;mapscript/doc&lt;/em&gt;.
&lt;/p&gt;</dd>
</dl>
<p>&lt;a name=&#8221;N101B7&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;QueryByPoint+example&#8221;&gt;&lt;/a&gt;
&lt;h4&gt;QueryByPoint example&lt;/h4&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>The following is an example of a working code snippets that opens a layer and queries
its features by shape. It has been used succesfully against shape and postgis sources.
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>Note the usage of the &lt;img src=&#8221;/images/link-ext.gif&#8221; align=&#8221;middle&#8221; /&gt;&lt;a href=&#8221;<a class="reference external" href="http://jakarta.apache.org/commons/logging/">http://jakarta.apache.org/commons/logging/</a>&#8220;&gt;commons-logging&lt;/a&gt; api for debuggins the code.
&lt;/p&gt;</dd>
</dl>
<p>&lt;pre class=&#8221;code&#8221;&gt;protected List queryLayerByPoint(int i, pointObj queryPoint) {&lt;br /&gt;   List results = new ArrayList();&lt;br /&gt;&lt;br /&gt;   layerObj layer = map.getLayer(i);&lt;br /&gt;   if (layer != null &amp;amp;&amp;amp; isVisible(layer)) {&lt;br /&gt;    if (log.isDebugEnabled()) {&lt;br /&gt;               log.debug(&#8220;Querying layer: &#8221; + layer.getName());&lt;br /&gt;          }&lt;br /&gt;         if (layer.queryByPoint(map, queryPoint,mapscript.MS_MULTIPLE, -1) == mapscript.MS_SUCCESS) {&lt;br /&gt;              // OLD pre 4.2 code, see <a class="reference external" href="http://mapserver.gis.umn.edu/docs/howto">http://mapserver.gis.umn.edu/docs/howto</a>/mapscript_querying&lt;br /&gt;               //resultCacheObj resultCache = layer.ggetResultcache();&lt;br /&gt;                   if (layer.open() == mapscript.MS_SUCCESS) {&lt;br /&gt;                       // OLD pre 4.4 code&lt;br /&gt;                       //for (int j=0;j &amp;lt; resultCache.getNumresults();j++) {&lt;br /&gt;                          for (int j = 0; j &amp;lt; layer.getNumResults(); j++) {&lt;br /&gt;                              if (log.isDebugEnabled())&lt;br /&gt;                                         log.debug(&#8220;Layer &#8221; + layer.getName() + &#8221;, result number:&#8221; + j);&lt;br /&gt;                                   resultCacheMemberObj resultMember = layer.getResult(j);&lt;br /&gt;                                   shapeObj shape = new shapeObj(layer.getType());&lt;br /&gt;                                   layer.getShape(shape,resultMember.getTileindex(), resultMember.getShapeindex());&lt;br /&gt;                                  if (shape != null) {&lt;br /&gt;                                      Map aResult = getResult(shape, layer);&lt;br /&gt;&lt;br /&gt;                                      results.add(aResult);&lt;br /&gt;                             } else {&lt;br /&gt;                                          log.error(&#8220;Shape &#8221; + j + &#8221; is null!&#8221;);&lt;br /&gt;                            }&lt;br /&gt;                         }&lt;br /&gt;                         layer.close();&lt;br /&gt;            } else {&lt;br /&gt;                          log.error(&#8220;Cannot open layer: &#8221; + layer.getName());&lt;br /&gt;               }&lt;br /&gt;         } else {&lt;br /&gt;                  log.info(&#8220;Query on layer &#8221; + layer.getName() + &#8221; failed.&#8221;);&lt;br /&gt;       }&lt;br /&gt;   }&lt;br /&gt;   return results;&lt;br /&gt;}&lt;br /&gt;                             &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;</p>
<p>&lt;a name=&#8221;N101CE&#8221;&gt;&lt;/a&gt;&lt;a name=&#8221;What+to+do+if+mapscript+crashes&#8221;&gt;&lt;/a&gt;
&lt;h3&gt;What to do if mapscript crashes&lt;/h3&gt;
&lt;div&gt;
&lt;p&gt;</p>
<blockquote>
<div>Make sure that you have done all I have suggested here, in particular review the list
of unsafe components. After that try to isolate the piece of code that is
failing: if you cannot do that because errors are random then look for a &lt;em&gt;hs_err*.log&lt;/em&gt; somewhere
in your filesystem. That is the file that the JVM creates when a crash occurs.
&lt;/p&gt;</div></blockquote>
<dl class="docutils">
<dt>&lt;p&gt;</dt>
<dd>The file should report a stack trace that will tell you more or less exactly where the crash happened.
Review that piece of code and eventually ask on the mailing list. Before you ask on the mailing list
gather all information that you have available and that will be useful to diagnose the problem.
A good report should include:
&lt;/p&gt;</dd>
</dl>
<p>&lt;ul&gt;</p>
<p>&lt;li&gt;Linux version (both kernel and distro). Can be obtained by running: &lt;em&gt;uname -a&lt;/em&gt;</p>
<p>&lt;/li&gt;</p>
<p>&lt;li&gt;GCC Version: &lt;em&gt;gcc &#8211;version&lt;/em&gt;</p>
<p>&lt;/li&gt;</p>
<p>&lt;li&gt;mapserver version and compile flags: run &lt;em&gt;mapserv -v&lt;/em&gt; and/or report the configure flags&lt;/li&gt;</p>
<p>&lt;li&gt;Java version and vendor: &lt;em&gt;java -version&lt;/em&gt;</p>
<p>&lt;/li&gt;</p>
<p>&lt;li&gt;swig version (if used): &lt;em&gt;swig -version&lt;/em&gt;</p>
<p>&lt;/li&gt;</p>
<p>&lt;li&gt;support libraries used and their version: gdal, proj, curl, postgis, etc&lt;/li&gt;</p>
<p>&lt;li&gt;whatever you think could help&lt;/li&gt;</p>
<p>&lt;/ul&gt;
&lt;p&gt;</p>
<blockquote>
<div>Additionally some will definitely find telling the reading of the venerable guide:
&lt;img src=&#8221;/images/link-ext.gif&#8221; align=&#8221;middle&#8221; /&gt;&lt;a href=&#8221;<a class="reference external" href="http://www.catb.org/%7Eesr/faqs/smart-questions.html">http://www.catb.org/%7Eesr/faqs/smart-questions.html</a>&#8220;&gt;how to ask questions the smart way&lt;/a&gt;.
&lt;/p&gt;&lt;/div&gt;</div></blockquote>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014, Regents of the University of Minnesota.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>