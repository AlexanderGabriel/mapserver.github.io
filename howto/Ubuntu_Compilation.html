<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Vorbereitung der Installation &mdash; MapServer 7.0.0-beta1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0-beta1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0-beta1 documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../it/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../es/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../zh_cn/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
        
        
          <a href="../de/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../fr/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../sq/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/howto/Ubuntu_Compilation.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>Workshop FOSSGIS 2006</p>
<p>Installation des &#8220;GIS-Betriebssystems&#8221; UbuntuGIS</p>
<p>Benjamin Thelen &amp; Lars-Hendrik Schneider</p>
<p>Bonn, den 29.03.2006</p>
<p>Mini-Howto Installation Ubuntu 5.10 &#8220;Breezy Badger&#8221; mit</p>
<ol class="arabic simple">
<li>PostgreSQL 8.1 und PostGIS 1.1.1</li>
<li>(optional MySQL 4.1)</li>
<li>UMN MapServer 4.8.2</li>
</ol>
<div class="section" id="vorbereitung-der-installation">
<h1>1. Vorbereitung der Installation<a class="headerlink" href="#vorbereitung-der-installation" title="Permalink to this headline">¶</a></h1>
<p>System bootet von CD/DVD, Monitor und Tastatur anschließen, Netzwerkkabel angeschlossen (DHCP) ...</p>
</div>
<div class="section" id="installation-des-basissystems">
<h1>2. Installation des Basissystems<a class="headerlink" href="#installation-des-basissystems" title="Permalink to this headline">¶</a></h1>
<p>Installation vom Datenträger starten, am Bootprompt</p>
<div class="highlight-python"><div class="highlight"><pre>boot: server
</pre></div>
</div>
<p>eingeben (für erweiterte Optionen &#8216;&#8217;server-expert&#8217;&#8216;). Dies startet die Installation des Grundsystems ohne X.</p>
<p>Sprache wählen/Choose language: Choose a language: German – Deutsch</p>
<p>Sprache wählen/Choose: Land wählen: Deutschland</p>
<p>Ihre Tastatur ist: Deutsch</p>
<p>Netzwerk einrichten: Bitte geben Sie den Namen des Rechners an: webgis</p>
<p>Festplatte partitionieren: Partitionstabelle von Hand eingeben:</p>
<p>z.B. 200MB /boot (Boot-Flag: EIN), 1GB SWAP (Auslagerungsdatei), 2GB /, Rest /var, u.U. noch /tmp auf eigene Partition. Alle Dateisysteme Ext3-Journaling-Dateisystem.</p>
<p>Zeitzone konfigurieren: Europe/Berlin: Ja</p>
<p>User und Passwörter einrichten: Voller Name für den neuen Benutzer: www-User</p>
<p>User und Passwörter einrichten: Benutzername für ihr Konto: www</p>
<p>User und Passwörter einrichten: Passwort für den neuen Benutzer: &lt;geheim&gt; (-Bestätigen)</p>
<p>Installation beenden: Erste Stufe abgeschlossen: Weiter (-Reboot)</p>
</div>
<div class="section" id="grundkonfiguration-des-systems">
<h1>3. Grundkonfiguration des Systems<a class="headerlink" href="#grundkonfiguration-des-systems" title="Permalink to this headline">¶</a></h1>
<p>Netzwerkeinstellungen:</p>
<p>/etc/network/interfaces (IP, Gateway, Broadcast ...)</p>
<p>/etc/resolv.conf (DNS)</p>
<p>Root-Account aktivieren:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># sudo passwd root</span>
<span class="c"># su</span>
</pre></div>
</div>
<p>anderen Usern sudo-Rechte entziehen:</p>
<div class="highlight-python"><div class="highlight"><pre># visudo
%admin ALL=(ALL) ALL ändern in #%admin ALL=(ALL) ALL
</pre></div>
</div>
<p>apt-Quellen einrichten:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># vi /etc/apt/sources.list</span>
</pre></div>
</div>
<p>Erste Zeile mit cdrom löschen, bei anderen &#8216;#&#8217; entfernen. TIP: Der vi ändert nicht die Eigentümerrechte einer Datei!</p>
<p>Erstes Mal Paketquellen einlesen &amp; updaten:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get update &amp;&amp; apt-get upgrade</span>
</pre></div>
</div>
<p>SSH-Server installieren:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install openssh-server</span>
</pre></div>
</div>
<p>Basispakete für Entwicklung installieren:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install build-essential</span>
</pre></div>
</div>
<p>Lokale anlegen:</p>
<div class="highlight-python"><div class="highlight"><pre># dpkg-reconfigure locales
de_utf-8 auswählen, andere abwählen, de_utf-8 als Standard wählen.
</pre></div>
</div>
<p>Umgebungsvariable LC_ALL exportieren:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># echo &#39;LC_ALL=de_DE.UTF-8&#39; &gt;&gt; /etc/environment</span>
<span class="c"># export LC_ALL=de_DE.UTF-8</span>
</pre></div>
</div>
</div>
<div class="section" id="apache2-webserver-mit-php5-installieren">
<h1>4. Apache2-Webserver mit PHP5 installieren<a class="headerlink" href="#apache2-webserver-mit-php5-installieren" title="Permalink to this headline">¶</a></h1>
<p>Verzeichnisse:</p>
<p>/etc/apache2/sites-available – Verzeichnis für vHosts-Dateien</p>
<p>/etc/apache2/sites-enabled – Verzeichnis für vHosts-Dateien, die aktiviert sind</p>
<p>/var/www – default Veröffentlichungsverzeichnis des Apache</p>
<p>/usr/lib/cgi-bin – default cgi-bin des Apache</p>
<p>/etc/php5/apache2/php.ini – PHP.INI-Datei von PHP5 im Apache2</p>
<p>Apache2 und PHP5 installieren (zieht weitere Pakete automatisch mit):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install apache2 apache2-common apache2-mpm-prefork apache2-utils libapache2-mod-php5 php5 php5-common php5-gd php5-mysql php5-pgsql</span>
</pre></div>
</div>
<p>Veröffentlichungsverzeichnis dem www-User schenken (für Webseitenbetreuung):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># chown -R www:www /var/www</span>
</pre></div>
</div>
</div>
<div class="section" id="postgresql-pakete-installieren">
<h1>5. PostgreSQL-Pakete installieren<a class="headerlink" href="#postgresql-pakete-installieren" title="Permalink to this headline">¶</a></h1>
<p>Verzeichnisse:</p>
<p>/etc/postgresql/8.1/main/pg_hba.conf – Rechteverwaltung des PostgreSQL-Servers</p>
<p>/etc/postgresql/8.1/main/postgresql.conf – zentrale Konfigurationsdatei des PostgreSQL-Servers</p>
<p>PostgreSQL-Pakete installieren (zieht weitere Pakete automatisch mit):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install postgresql-8.1 postgresql-client-8.1 postgresql-contrib-8.1 postgresql-server-dev-8.1</span>
</pre></div>
</div>
<p>Contrib-Paket wird dabei später für die PostGIS-Installation benötigt.</p>
<p>PostgreSQL für den Einsatz mit TCP/IP freischalten:</p>
<div class="highlight-python"><div class="highlight"><pre># vi /etc/postgresql/8.1/main/postgresql.conf
-&gt; #listen_addresses = &#39;localhost&#39; ändern in listen_addresses = &#39;localhost&#39;
</pre></div>
</div>
<p>Nutzerrechte freischalten:</p>
<div class="highlight-python"><div class="highlight"><pre># vi /etc/postgresql/8.1/main/pg_hba.conf
-&gt; local all all ident sameuser ändern in local all all trust bzw. was als Sicherheitspolicy vorgesehen ist.
</pre></div>
</div>
<p>PostgreSQL-Server neu starten:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># /etc/init.d/postgresql-8.1 restart</span>
</pre></div>
</div>
<p>/<strong>*</strong> <em>OPTIONAL</em> <strong>*</strong>/
MySQL-Pakete installieren</p>
<p>MySQL-Paket installieren (zieht weitere Pakete automatisch mit):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install mysql-server-4.1</span>
</pre></div>
</div>
<p>u.a. postfix (für die Zustellung von Mails aus dem DB-System)
&#8216;Local only&#8217; oder &#8216;No configuration&#8217;
/<strong>*</strong> <em>OPTIONAL</em> <strong>*</strong>/</p>
</div>
<div class="section" id="vor-den-weiteren-schritten-pakete-holen">
<h1>6. Vor den weiteren Schritten Pakete holen<a class="headerlink" href="#vor-den-weiteren-schritten-pakete-holen" title="Permalink to this headline">¶</a></h1>
<p>Folgende Pakete werden für die Kompilierung von PostGIS bzw. des UMN MapServers benötigt und werden vorab installiert (zieht weitere Pakete automatisch mit):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install proj libgeos-dev libcurl3-dev libfreetype6-dev libgdal1-dev gdal-bin libjpeg62-dev libpng12-dev libgd2-xpm-dev flex bison</span>
</pre></div>
</div>
</div>
<div class="section" id="kompilierung-und-installation-von-postgis">
<h1>7. Kompilierung und Installation von PostGIS<a class="headerlink" href="#kompilierung-und-installation-von-postgis" title="Permalink to this headline">¶</a></h1>
<p>Arbeitsverzeichnis anlegen:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># mkdir /var/src</span>
</pre></div>
</div>
<p>Sourcen von PostgreSQL besorgen von <a class="reference external" href="http://www.postgresql.org/ftp/source/v8.1.2/">http://www.postgresql.org/ftp/source/v8.1.2/</a>, entweder herunterladen und per SCP hochladen oder aus dem Mirror direkt mit wget laden:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># wget ftp.de.postgresql.org/mirror/postgresql/source/v8.1.2/postgresql-8.1.2.tar.gz</span>
</pre></div>
</div>
<p>Unbedingt die genaue PostgreSQL-Version (hier die 8.1.2) beachten!</p>
<p>Sourcen entpacken:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># tar xzf postgresql-8.1.2.tar.gz</span>
<span class="c"># cd postgresql-8.1.2</span>
</pre></div>
</div>
<p>configure laufen lassen:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># ./configure -–without-readline -–without-zlib</span>
</pre></div>
</div>
<p>wenn configure erfolgreich war:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># make</span>
</pre></div>
</div>
<p>und KEIN make install, da wir ja nur das Binary brauchen!</p>
<p>PostGIS herunterladen in das Contrib-Verzeichnis der PostgreSQL-Sourcen laden und entpacken:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># cd /var/src/postgresql-8.1.2/contrib</span>
<span class="c"># wget http://postgis.refractions.net/download/postgis-1.1.1.tar.gz</span>
<span class="c"># tar xzf postgis-1.1.1.tar.gz</span>
<span class="c"># mv postgis-1.1.1 postgis</span>
</pre></div>
</div>
<p>PostGIS bauen und ins System installieren:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># cd postgis</span>
<span class="c"># make &amp;&amp; make install</span>
</pre></div>
</div>
<p>Anlegen der ersten PostGIS-Datenbank als Benutzer postgres:</p>
<div class="highlight-python"><div class="highlight"><pre># su postgres
$ createdb mygisdb
$ createlang plpgsql mygisdb
$ psql -d mygisdb -f /usr/share/postgresql/8.1/contrib/lwpostgis.sql
$ psql -d mygisdb -f /usr/share/postgresql/8.1/contrib/spatial_ref_sys.sql
$ exit
</pre></div>
</div>
</div>
<div class="section" id="kompilierung-und-installation-des-umn-mapservers">
<h1>8. Kompilierung und Installation des UMN MapServers<a class="headerlink" href="#kompilierung-und-installation-des-umn-mapservers" title="Permalink to this headline">¶</a></h1>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># cd /var/src</span>
<span class="c"># wget http://cvs.gis.umn.edu/dist/mapserver-4.8.2.tar.gz</span>
<span class="c"># tar xzf mapserver-4.8.2.tar.gz</span>
<span class="c"># cd mapserver-4.8.2</span>
</pre></div>
</div>
<p>Dateien tunen:</p>
<div class="highlight-python"><div class="highlight"><pre># vi mapsymbol.h
-&gt; #define MS_MAXSYMBOLS 64 ändern in #define MS_MAXSYMBOLS 1000
</pre></div>
</div>
<p>Damit wird die Zahl der möglichen Symbole erhöht.</p>
<div class="highlight-python"><div class="highlight"><pre># vi map.h
-&gt; #define MS_MAXCLASSES 250 ändern in #define MS_MAXCLASSES 1000
</pre></div>
</div>
<p>Anzahl Klassen je Layer erhöhen.</p>
<div class="highlight-python"><div class="highlight"><pre>-&gt; #define MS_MAXLAYERS 200 ändern in #define MS_MAXLAYERS 500
</pre></div>
</div>
<p>Anzahl Layer erhöhen.</p>
<div class="highlight-python"><div class="highlight"><pre>-&gt; #define MS_MAXIMAGESIZE_DEFAULT 2048 ändern in #define MS_MAXIMAGESIZE_DEFAULT 10000
</pre></div>
</div>
<p>Dateigröße des möglichen Ausgabebildes erhöhen (wichtig für den hochqualitativen Druck!)</p>
<p>Nun configure ausführen:</p>
<div class="highlight-python"><div class="highlight"><pre># ./configure --with-gd \
--with-gdal=/usr/bin/gdal-config \
--with-proj \
--with-ogr \
--with-jpeg=/usr/ \
--without-png \
--without-tiff \
--with-freetype \
--with-wmsserver \
--with-wmsclient \
--with-wfs \
--with-postgis
</pre></div>
</div>
<p>Wenn configure erfolgreich, dann das Binary bauen:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># make</span>
</pre></div>
</div>
<p>...und anschließend testen:</p>
<div class="highlight-python"><div class="highlight"><pre># ./mapserv -v
MapServer version 4.8.2 OUTPUT=GIF OUTPUT=PNG OUTPUT=JPEG OUTPUT=WBMP OUTPUT=SVG SUPPORTS=PROJ SUPPORTS=FREETYPE SUPPORTS=WMS_SERVER SUPPORTS=WMS_CLIENT        SUPPORTS=WFS_SERVER INPUT=EPPL7 INPUT=POSTGIS INPUT=OGR INPUT=GDAL INPUT=SHAPEFILE
</pre></div>
</div>
<p>In das CGI-BIN des Apache2 verschieben:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># cp mapserv /usr/lib/cgi-bin/</span>
</pre></div>
</div>
<p>und im Browser testen
Im Browser: <em>http://&lt;IP-Adresse&gt;/cgi-bin/mapserv/</em>
No query information to decode. QUERY_STRING is set, but empty.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Vorbereitung der Installation</a></li>
<li><a class="reference internal" href="#installation-des-basissystems">2. Installation des Basissystems</a></li>
<li><a class="reference internal" href="#grundkonfiguration-des-systems">3. Grundkonfiguration des Systems</a></li>
<li><a class="reference internal" href="#apache2-webserver-mit-php5-installieren">4. Apache2-Webserver mit PHP5 installieren</a></li>
<li><a class="reference internal" href="#postgresql-pakete-installieren">5. PostgreSQL-Pakete installieren</a></li>
<li><a class="reference internal" href="#vor-den-weiteren-schritten-pakete-holen">6. Vor den weiteren Schritten Pakete holen</a></li>
<li><a class="reference internal" href="#kompilierung-und-installation-von-postgis">7. Kompilierung und Installation von PostGIS</a></li>
<li><a class="reference internal" href="#kompilierung-und-installation-des-umn-mapservers">8. Kompilierung und Installation des UMN MapServers</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014, Regents of the University of Minnesota.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>