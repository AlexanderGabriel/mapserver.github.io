<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1   Building MapServer From Scratch Under Linux &mdash; MapServer 7.0.0-beta1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0-beta1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0-beta1 documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../it/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../es/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../zh_cn/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
        
        
          <a href="../de/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../fr/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../sq/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/howto/building-mapserver-its-main-dependencies-from-scratches-under-linux.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="building-mapserver-from-scratch-under-linux">
<h1><a class="toc-backref" href="#table-of-contents">1&nbsp;&nbsp;&nbsp;Building MapServer From Scratch Under Linux</a><a class="headerlink" href="#building-mapserver-from-scratch-under-linux" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">alessandro pasott</td>
</tr>
<tr class="field-even field"><th class="field-name">Revision:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">$Date$</td>
</tr>
<tr class="field-even field"><th class="field-name">Last Updated:</th><td class="field-body">2007/06/20</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#building-mapserver-from-scratch-under-linux" id="id1">1&nbsp;&nbsp;&nbsp;Building MapServer From Scratch Under Linux</a><ul class="auto-toc">
<li><a class="reference internal" href="#introduction" id="id2">1.1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference internal" href="#how-it-works" id="id3">1.2&nbsp;&nbsp;&nbsp;How it works</a></li>
<li><a class="reference internal" href="#prerequisites" id="id4">1.3&nbsp;&nbsp;&nbsp;Prerequisites</a></li>
<li><a class="reference internal" href="#configuration" id="id5">1.4&nbsp;&nbsp;&nbsp;Configuration</a></li>
<li><a class="reference internal" href="#if-something-goes-wrong" id="id6">1.5&nbsp;&nbsp;&nbsp;If something goes wrong</a></li>
<li><a class="reference internal" href="#code" id="id7">1.6&nbsp;&nbsp;&nbsp;Code</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">1.1&nbsp;&nbsp;&nbsp;Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This is just a small script to download, configure and build mapserver and its
main dependencies from sources under Linux. This HowTo assumes a basic
knowledge of bash commands and the ability to edit the scripts itself and
change a few configuration prameters.</p>
<p>The goal is to have latest versions of mapserver and its main dependencies.</p>
<dl class="docutils">
<dt>The script will build:</dt>
<dd><ul class="first last simple">
<li>GDAL</li>
<li>PROJ</li>
<li>GEOS</li>
<li>MAPSERVER</li>
<li>POSTGIS</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="how-it-works">
<h2><a class="toc-backref" href="#table-of-contents">1.2&nbsp;&nbsp;&nbsp;How it works</a><a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>Fisrst, all the libraries and mapserver will be downloaded from their official
websites, then tey will be uncompressed and extracted on your disk, then they
will be configured, built and installed one by one.</p>
<p>Note that you don&#8217;t have to run the script as root, run it as a normal user,
you will be prompted for a password when needed. If your distribution doesn&#8217;t
use the &#8220;sudo&#8221; system, just change all &#8220;sudo&#8221; commands in the script into &#8220;su
-c &#8221;.</p>
</div>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#table-of-contents">1.3&nbsp;&nbsp;&nbsp;Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Building from sources means you already have installed the compiler, its tools
and the header files of all the main shared libraries (zlib etc.) and have a
working toolchain for compilation from sources.</p>
<p>This was tested on Linux KUbuntu, Ubuntu server and Debian.</p>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#table-of-contents">1.4&nbsp;&nbsp;&nbsp;Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>After copying the script on the disk and making it executable, you should open
it with an editor and change some configuration variables.</p>
<p>More detailed instructions are in the script comments.</p>
</div>
<div class="section" id="if-something-goes-wrong">
<h2><a class="toc-backref" href="#table-of-contents">1.5&nbsp;&nbsp;&nbsp;If something goes wrong</a><a class="headerlink" href="#if-something-goes-wrong" title="Permalink to this headline">¶</a></h2>
<p>First uncomment WGET in the code if you don&#8217;t want to download all files again,
then check your paths and those configured or hardcoded in the script.</p>
<p>Check also the parameters passed to the &#8220;configure&#8221; commands in the script,
maybe you don&#8217;t need all those options.</p>
</div>
<div class="section" id="code">
<h2><a class="toc-backref" href="#table-of-contents">1.6&nbsp;&nbsp;&nbsp;Code</a><a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre># Where to install: usually /usr or /usr/local
PREFIX=/usr

# Directory of PHP binary libs, in my case, was /usr/lib/php5/20051025/
PHPLIBDIR=/usr/lib/php5/20051025/

# Uncomment for a debug build of gdal library
#DEBUG_GDAL=1

# Activate download (deactivate if you have still downloaded)
WGET=1

# Libraries to fetch, configure, build and install
# Adjust versions according to your needs
GEOS=&quot;geos-3.0.0rc4&quot;
GDAL=&quot;gdal-1.4.1&quot;
PROJ=&quot;proj-4.5.0&quot;
MAPSERVER=&quot;mapserver-4.10.1&quot;
# Uncomment if you still have postgresql installed and want
# to build postgis, adjust paths in the last code block of this file
#POSTGIS=&quot;postgis-1.2.1&quot;




if [ $GEOS ]; then
        if [ $WGET = 1 &amp;&amp; ! -f &quot;$GEOS.tar.bz2&quot; ]; then
                wget http://geos.refractions.net/$GEOS.tar.bz2
                tar -xjf $GEOS.tar.bz2
        fi

        cd $GEOS
        ./configure --prefix=$PREFIX
        make clean
        make
        sudo make install

        cd ..
fi

if [ $GDAL ]; then
        if [ $WGET = 1 ]; then
                wget http://download.osgeo.org/gdal/$GDAL.tar.gz
                tar -xzf $GDAL.tar.gz
        fi

        cd $GDAL
        if [ $DEBUG_GDAL ]; then
                export CFG=debug
        fi
        ./configure --prefix=$PREFIX --with-mysql
        make clean
        make
        sudo make install
        cd ..
fi


if [ $PROJ ]; then
        if [ $WGET = 1 ]; then
                wget ftp://ftp.remotesensing.org/proj/$PROJ.tar.gz
                tar -xzf $PROJ.tar.gz
        fi

        cd $PROJ
        ./configure --prefix=$PREFIX
        make clean
        make
        sudo make install
        sudo cp $PREFIX/include/proj_api.h $PREFIX/lib
        cd ..
fi


if [ $MAPSERVER ]; then
        if [ $WGET = 1 ]; then
                wget http://cvs.gis.umn.edu/dist/$MAPSERVER.tar.gz
                tar -xzf $MAPSERVER.tar.gz
        fi

        cd $MAPSERVER
        ./configure \
         --with-wfs \
         --with-wfsclient \
         --with-wmsclient \
         --with-proj=$PREFIX/lib \
         --with-geos=$PREFIX/bin/geos-config \
         --with-gdal=$PREFIX/bin/gdal-config \
         --with-ogr=$PREFIX/bin/gdal-config \
         --with-php=/usr/include/php5 \
         --with-mygis=yes \
         --with-postgis \
         --with-httpd=/usr/sbin/apache2 \
         --prefix=$PREFIX
        make clean
        make
        sudo cp mapserv /usr/lib/cgi-bin/
        sudo cp shp2img $PREFIX
        sudo cp shptree $PREFIX
        sudo cp tile4ms $PREFIX
        sudo cp mapscript/php3/php_mapscript.so $PHPLIBDIR
        cd ..
fi



if [ $POSTGIS ]; then
        if [ $WGET = 1 &amp;&amp; ! -f &quot;$POSTGIS.tar.gz&quot; ]; then
                wget http://www.postgis.org/download/$POSTGIS.tar.gz
                tar -xzf $POSTGIS.tar.gz
        fi

        cd $POSTGIS
        ./configure --prefix=$PREFIX/lib/postgresql/8.1/
        make clean
        make
        sudo make install
        cd ..
fi
</pre></div>
</div>
<p>Originally published on my blog at <a class="reference external" href="http://www.itopen.it/2007/04/24/a-script-to-build-the-latest-mapserver-webgis-from-sources/">ItOpen - Open Web Solutions</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1&nbsp;&nbsp;&nbsp;Building MapServer From Scratch Under Linux</a><ul>
<li><a class="reference internal" href="#introduction">1.1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference internal" href="#how-it-works">1.2&nbsp;&nbsp;&nbsp;How it works</a></li>
<li><a class="reference internal" href="#prerequisites">1.3&nbsp;&nbsp;&nbsp;Prerequisites</a></li>
<li><a class="reference internal" href="#configuration">1.4&nbsp;&nbsp;&nbsp;Configuration</a></li>
<li><a class="reference internal" href="#if-something-goes-wrong">1.5&nbsp;&nbsp;&nbsp;If something goes wrong</a></li>
<li><a class="reference internal" href="#code">1.6&nbsp;&nbsp;&nbsp;Code</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014, Regents of the University of Minnesota.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>